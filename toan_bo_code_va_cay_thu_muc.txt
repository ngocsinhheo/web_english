üì¶ C·∫•u tr√∫c th∆∞ m·ª•c & m√£ ngu·ªìn: C:\xampp\htdocs\web_english

- üìÅ admin/
  - üìÑ admin.php

  ----- üìÑ N·ªôi dung file: admin\admin.php -----
<?php
session_start();
require_once '../config/config.php';

// B·∫≠t hi·ªÉn th·ªã l·ªói ƒë·ªÉ debug
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

if (!isset($_SESSION['user_id']) || $_SESSION['role'] !== 'admin') {
    header("Location: ../auth/login.php");
    exit();
}

// H√†m x·ª≠ l√Ω upload file
function handleFileUpload($file, $targetDir) {
    $fileName = basename($file["name"]);
    $targetPath = $targetDir . $fileName;

    // Ki·ªÉm tra lo·∫°i t·ªáp
    $allowedTypes = ['image/jpeg', 'image/png', 'application/pdf', 'video/mp4'];
    if (!in_array($file['type'], $allowedTypes)) {
        throw new Exception("Lo·∫°i t·ªáp kh√¥ng ƒë∆∞·ª£c h·ªó tr·ª£!");
    }

    // Ki·ªÉm tra k√≠ch th∆∞·ªõc t·ªáp (t·ªëi ƒëa 5MB)
    if ($file['size'] > 5 * 1024 * 1024) {
        throw new Exception("T·ªáp qu√° l·ªõn! T·ªëi ƒëa 5MB.");
    }

    return move_uploaded_file($file["tmp_name"], $targetPath) ? $targetPath : false;
}

// X·ª≠ l√Ω ph·∫£n h·ªìi tin nh·∫Øn
if (isset($_POST['reply_message'])) {
    try {
        $contact_id = filter_var($_POST['contact_id'], FILTER_SANITIZE_NUMBER_INT);
        $reply = filter_var($_POST['reply'], FILTER_SANITIZE_STRING);

        $stmt = $conn->prepare("UPDATE contacts SET reply = ?, status = 'replied', replied_at = NOW() WHERE id = ?");
        $stmt->bind_param("si", $reply, $contact_id);
        $stmt->execute() ? $success = "Ph·∫£n h·ªìi th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();

        // T·∫£i l·∫°i trang ƒë·ªÉ c·∫≠p nh·∫≠t giao di·ªán
        header("Location: admin.php");
        exit();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω th√™m ng∆∞·ªùi d√πng
if (isset($_POST['add_user'])) {
    try {
        $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);
        $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);
        $password = password_hash($_POST['password'], PASSWORD_DEFAULT);

        $stmt = $conn->prepare("INSERT INTO users (username, email, password, role) VALUES (?, ?, ?, 'user')");
        $stmt->bind_param("sss", $username, $email, $password);
        $stmt->execute() ? $success = "Th√™m ng∆∞·ªùi d√πng th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω x√≥a ng∆∞·ªùi d√πng
if (isset($_GET['delete_user'])) {
    try {
        $user_id = filter_var($_GET['delete_user'], FILTER_SANITIZE_NUMBER_INT);
        $stmt = $conn->prepare("DELETE FROM users WHERE id = ? AND role != 'admin'");
        $stmt->bind_param("i", $user_id);
        $stmt->execute() ? $success = "X√≥a ng∆∞·ªùi d√πng th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω th√™m kh√≥a h·ªçc
if (isset($_POST['add_course'])) {
    try {
        $title = filter_var($_POST['title'], FILTER_SANITIZE_STRING);
        $description = filter_var($_POST['description'], FILTER_SANITIZE_STRING);
        $teacher_name = filter_var($_POST['teacher_name'], FILTER_SANITIZE_STRING);
        $price = filter_var($_POST['price'], FILTER_SANITIZE_NUMBER_FLOAT, FILTER_FLAG_ALLOW_FRACTION);
        $target_dir = "../uploads/";
        
        $image = handleFileUpload($_FILES["image"], $target_dir);
        $content_file = handleFileUpload($_FILES["content_file"], $target_dir);
        $video_file = handleFileUpload($_FILES["video_file"], $target_dir);

        if (!$image || !$content_file || !$video_file) throw new Exception("L·ªói upload file!");

        $stmt = $conn->prepare("INSERT INTO courses (title, description, price, teacher_name, image, content_file, video_file) VALUES (?, ?, ?, ?, ?, ?, ?)");
        $stmt->bind_param("ssdssss", $title, $description, $price, $teacher_name, $image, $content_file, $video_file);
        $stmt->execute() ? $success = "Th√™m kh√≥a h·ªçc th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω th√™m b√†i h·ªçc con
if (isset($_POST['add_sub_lesson'])) {
    try {
        $course_id = filter_var($_POST['course_id'], FILTER_SANITIZE_NUMBER_INT);
        $title = filter_var($_POST['title'], FILTER_SANITIZE_STRING);
        $description = filter_var($_POST['description'], FILTER_SANITIZE_STRING);
        $order_number = filter_var($_POST['order_number'], FILTER_SANITIZE_NUMBER_INT);
        $target_dir = "../uploads/";

        $video_file = handleFileUpload($_FILES["video_file"], $target_dir);
        $content_file = handleFileUpload($_FILES["content_file"], $target_dir);

        if (!$video_file || !$content_file) throw new Exception("L·ªói upload file!");

        $stmt = $conn->prepare("INSERT INTO sub_lessons (course_id, title, description, video_file, content_file, order_number) VALUES (?, ?, ?, ?, ?, ?)");
        $stmt->bind_param("issssi", $course_id, $title, $description, $video_file, $content_file, $order_number);
        $stmt->execute() ? $success = "Th√™m b√†i h·ªçc con th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω th√™m c√¢u h·ªèi ki·ªÉm tra
if (isset($_POST['add_test_question'])) {
    try {
        $sub_lesson_id = filter_var($_POST['sub_lesson_id'], FILTER_SANITIZE_NUMBER_INT);
        $question_text = filter_var($_POST['question_text'], FILTER_SANITIZE_STRING);
        $option_a = filter_var($_POST['option_a'], FILTER_SANITIZE_STRING);
        $option_b = filter_var($_POST['option_b'], FILTER_SANITIZE_STRING);
        $option_c = filter_var($_POST['option_c'], FILTER_SANITIZE_STRING);
        $option_d = filter_var($_POST['option_d'], FILTER_SANITIZE_STRING);
        $correct_answer = filter_var($_POST['correct_answer'], FILTER_SANITIZE_STRING);

        $stmt = $conn->prepare("INSERT INTO sub_lesson_tests (sub_lesson_id, question_text, option_a, option_b, option_c, option_d, correct_answer) VALUES (?, ?, ?, ?, ?, ?, ?)");
        $stmt->bind_param("issssss", $sub_lesson_id, $question_text, $option_a, $option_b, $option_c, $option_d, $correct_answer);
        $stmt->execute() ? $success = "Th√™m c√¢u h·ªèi ki·ªÉm tra th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω x√≥a kh√≥a h·ªçc
if (isset($_GET['delete_course'])) {
    try {
        $course_id = filter_var($_GET['delete_course'], FILTER_SANITIZE_NUMBER_INT);
        $stmt = $conn->prepare("DELETE FROM courses WHERE id = ?");
        $stmt->bind_param("i", $course_id);
        $stmt->execute() ? $success = "X√≥a kh√≥a h·ªçc th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω x√≥a b√†i h·ªçc con
if (isset($_GET['delete_sub_lesson'])) {
    try {
        $sub_lesson_id = filter_var($_GET['delete_sub_lesson'], FILTER_SANITIZE_NUMBER_INT);
        $stmt = $conn->prepare("DELETE FROM sub_lessons WHERE id = ?");
        $stmt->bind_param("i", $sub_lesson_id);
        $stmt->execute() ? $success = "X√≥a b√†i h·ªçc con th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

// X·ª≠ l√Ω x√≥a c√¢u h·ªèi ki·ªÉm tra
if (isset($_GET['delete_test_question'])) {
    try {
        $question_id = filter_var($_GET['delete_test_question'], FILTER_SANITIZE_NUMBER_INT);
        // S·ª¨A L·∫†I T√äN B·∫¢NG ·ªû ƒê√ÇY:
        $stmt = $conn->prepare("DELETE FROM sub_lesson_tests WHERE id = ?");
        $stmt->bind_param("i", $question_id);
        $stmt->execute() ?
        $success = "X√≥a c√¢u h·ªèi ki·ªÉm tra th√†nh c√¥ng!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}
// Truy v·∫•n d·ªØ li·ªáu
$result_users = $conn->query("SELECT id, username, email FROM users WHERE role != 'admin'");
$total_users = $result_users->num_rows ?? 0;

$result_courses = $conn->query("SELECT id, title, description, price, teacher_name, image, content_file, video_file FROM courses");
$popular_courses = [];
while ($course = $result_courses->fetch_assoc()) {
    $popular_courses[$course['title']] = rand(10, 100); // Gi·∫£ l·∫≠p l∆∞·ª£t th√≠ch
}
$result_courses->data_seek(0);

$result_contacts = $conn->query("SELECT id, user_id, username, message, status, reply, created_at, replied_at FROM contacts ORDER BY created_at DESC");
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TOEIC Learning</title>
    <link rel="stylesheet" href="../style.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: Arial, sans-serif;
        }

        body {
            background-color: #f4f4f4;
        }

        .container {
            display: flex;
            min-height: 100vh;
        }

        .sidebar {
            width: 250px;
            background-color: #2c3e50;
            color: #fff;
            padding: 20px;
        }

        .sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
            font-size: 24px;
        }

        .sidebar ul {
            list-style: none;
        }

        .sidebar ul li {
            padding: 15px;
            margin-bottom: 10px;
            cursor: pointer;
            border-radius: 5px;
            transition: background 0.3s;
        }

        .sidebar ul li:hover {
            background-color: #34495e;
        }

        .sidebar ul li.active {
            background-color: #3498db;
        }

        .sidebar ul li a {
            color: #fff;
            text-decoration: none;
            display: block;
        }

        .main-content {
            flex: 1;
            padding: 30px;
            background-color: #fff;
        }

        .content-section {
            display: none;
        }

        .content-section.active {
            display: block;
        }

        .main-content h1 {
            font-size: 28px;
            margin-bottom: 20px;
            color: #2c3e50;
        }

        form {
            margin-bottom: 30px;
        }

        form input, form textarea, form select {
            padding: 10px;
            margin: 5px 0;
            width: calc(100% - 22px);
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        form button {
            padding: 10px 20px;
            background-color: #28a745;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        form button:hover {
            background-color: #218838;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        table th, table td {
            padding: 12px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }

        table th {
            background-color: #f8f9fa;
            color: #2c3e50;
        }

        table td img {
            max-width: 100px;
            border-radius: 5px;
        }

        table td a {
            color: #3498db;
            text-decoration: none;
        }

        table td a.delete-btn {
            color: #dc3545;
        }

        table td a:hover {
            text-decoration: underline;
        }

        .chart-container {
            max-width: 600px;
            margin: 20px 0;
        }

        .success {
            color: #28a745;
            padding: 10px;
            background-color: #e9f7ef;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .error {
            color: #dc3545;
            padding: 10px;
            background-color: #f8e1e1;
            border-radius: 5px;
            margin-bottom: 20px;
        }

        .reply-btn {
            padding: 5px 10px;
            background-color: #3498db;
            color: #fff;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        .reply-btn:hover {
            background-color: #2980b9;
        }

        /* CSS cho accordion */
        .accordion-header {
            background: #f9fbfd;
            padding: 10px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 1px solid #ddd;
        }

        .accordion-header span {
            font-size: 18px;
            color: #3498db;
        }

        .accordion-content {
            display: none;
            padding: 15px;
            background: #fff;
        }

        .accordion-content.active {
            display: block;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="sidebar">
            <h2>Admin Panel</h2>
            <ul>
                <li onclick="showSection('dashboard')" class="active">Dashboard</li>
                <li onclick="showSection('users')">Qu·∫£n L√Ω Ng∆∞·ªùi D√πng</li>
                <li onclick="showSection('courses')">Qu·∫£n L√Ω Kh√≥a H·ªçc</li>
                <li onclick="showSection('contacts')">Qu·∫£n L√Ω Tin Nh·∫Øn</li>
                <li><a href="../auth/logout.php">ƒêƒÉng xu·∫•t</a></li>
            </ul>
        </div>

        <div class="main-content">
            <?php if (isset($success)): ?><p class="success"><?php echo $success; ?></p><?php endif; ?>
            <?php if (isset($error)): ?><p class="error"><?php echo $error; ?></p><?php endif; ?>

            <div id="dashboard" class="content-section active">
                <h1>Dashboard</h1>
                <div class="chart-container">
                    <canvas id="dashboardUserChart"></canvas>
                </div>
                <div class="chart-container">
                    <canvas id="popularCoursesChart"></canvas>
                </div>
            </div>

            <div id="users" class="content-section">
                <h1>Qu·∫£n L√Ω Ng∆∞·ªùi D√πng</h1>
                <form method="POST">
                    <input type="text" name="username" placeholder="T√™n ng∆∞·ªùi d√πng" required>
                    <input type="email" name="email" placeholder="Email" required>
                    <input type="password" name="password" placeholder="M·∫≠t kh·∫©u" required>
                    <button type="submit" name="add_user">Th√™m</button>
                </form>
                <table>
                    <tr><th>ID</th><th>T√™n</th><th>Email</th><th>H√†nh ƒë·ªông</th></tr>
                    <?php while ($user = $result_users->fetch_assoc()): ?>
                        <tr>
                            <td><?php echo $user['id']; ?></td>
                            <td><?php echo htmlspecialchars($user['username']); ?></td>
                            <td><?php echo htmlspecialchars($user['email']); ?></td>
                            <td><a class="delete-btn" href="?delete_user=<?php echo $user['id']; ?>" onclick="return confirm('X√°c nh·∫≠n x√≥a?')">X√≥a</a></td>
                        </tr>
                    <?php endwhile; ?>
                </table>
            </div>

            <div id="courses" class="content-section">
                <h1>Qu·∫£n L√Ω Kh√≥a H·ªçc</h1>
                <form method="POST" enctype="multipart/form-data">
                    <input type="text" name="title" placeholder="T√™n kh√≥a h·ªçc" required>
                    <textarea name="description" placeholder="M√¥ t·∫£" required></textarea>
                    <input type="text" name="teacher_name" placeholder="Gi√°o vi√™n" required>
                    <input type="number" name="price" placeholder="Gi√°" required>
                    <input type="file" name="image" accept="image/*" required>
                    <input type="file" name="content_file" accept=".pdf" required>
                    <input type="file" name="video_file" accept="video/*" required>
                    <button type="submit" name="add_course">Th√™m</button>
                </form>
                <table>
                    <tr><th>ID</th><th>Ti√™u ƒë·ªÅ</th><th>Gi√°</th><th>Gi√°o vi√™n</th><th>H√¨nh ·∫£nh</th><th>T√†i li·ªáu</th><th>Video</th><th>H√†nh ƒë·ªông</th></tr>
                    <?php while ($course = $result_courses->fetch_assoc()): ?>
                        <tr>
                            <td><?php echo $course['id']; ?></td>
                            <td>
                                <div class="accordion-header">
                                    <span><?php echo htmlspecialchars($course['title']); ?></span>
                                    <span>‚ñº</span>
                                </div>
                                <div class="accordion-content">
                                    <!-- Hi·ªÉn th·ªã b√†i h·ªçc con -->
                                    <h3 style="margin: 10px 0;">B√†i h·ªçc con</h3>
                                    <form method="POST" enctype="multipart/form-data">
                                        <input type="hidden" name="course_id" value="<?php echo $course['id']; ?>">
                                        <input type="text" name="title" placeholder="Ti√™u ƒë·ªÅ b√†i h·ªçc" required>
                                        <textarea name="description" placeholder="M√¥ t·∫£ b√†i h·ªçc" required></textarea>
                                        <input type="number" name="order_number" placeholder="Th·ª© t·ª± b√†i h·ªçc" required>
                                        <input type="file" name="video_file" accept="video/*" required>
                                        <input type="file" name="content_file" accept=".pdf" required>
                                        <button type="submit" name="add_sub_lesson">Th√™m b√†i h·ªçc con</button>
                                    </form>
                                    <table style="margin-top: 10px;">
                                        <tr><th>ID</th><th>Ti√™u ƒë·ªÅ</th><th>M√¥ t·∫£</th><th>Th·ª© t·ª±</th><th>T√†i li·ªáu</th><th>Video</th><th>H√†nh ƒë·ªông</th></tr>
                                        <?php
                                        $sub_lessons = $conn->query("SELECT * FROM sub_lessons WHERE course_id = {$course['id']} ORDER BY order_number ASC");
                                        while ($sub_lesson = $sub_lessons->fetch_assoc()):
                                        ?>
                                            <tr>
                                                <td><?php echo $sub_lesson['id']; ?></td>
                                                <td>
                                                    <div class="accordion-header">
                                                        <span><?php echo htmlspecialchars($sub_lesson['title']); ?></span>
                                                        <span>‚ñº</span>
                                                    </div>
                                                    <div class="accordion-content">
                                                        <!-- Form th√™m c√¢u h·ªèi ki·ªÉm tra -->
                                                        <h4 style="margin: 10px 0;">Th√™m c√¢u h·ªèi ki·ªÉm tra</h4>
                                                        <form method="POST">
                                                            <input type="hidden" name="sub_lesson_id" value="<?php echo $sub_lesson['id']; ?>">
                                                            <textarea name="question_text" placeholder="C√¢u h·ªèi" required></textarea>
                                                            <input type="text" name="option_a" placeholder="L·ª±a ch·ªçn A" required>
                                                            <input type="text" name="option_b" placeholder="L·ª±a ch·ªçn B" required>
                                                            <input type="text" name="option_c" placeholder="L·ª±a ch·ªçn C" required>
                                                            <input type="text" name="option_d" placeholder="L·ª±a ch·ªçn D" required>
                                                            <select name="correct_answer" required>
                                                                <option value="A">A</option>
                                                                <option value="B">B</option>
                                                                <option value="C">C</option>
                                                                <option value="D">D</option>
                                                            </select>
                                                            <button type="submit" name="add_test_question">Th√™m c√¢u h·ªèi</button>
                                                        </form>
                                                        <!-- Danh s√°ch c√¢u h·ªèi ki·ªÉm tra -->
                                                        <h4 style="margin: 10px 0;">Danh s√°ch c√¢u h·ªèi ki·ªÉm tra</h4>
                                                        <table style="margin-top: 10px;">
                                                            <tr><th>ID</th><th>C√¢u h·ªèi</th><th>L·ª±a ch·ªçn A</th><th>L·ª±a ch·ªçn B</th><th>L·ª±a ch·ªçn C</th><th>L·ª±a ch·ªçn D</th><th>ƒê√°p √°n ƒë√∫ng</th><th>H√†nh ƒë·ªông</th></tr>
                                                            <?php
                                                            $questions = $conn->query("SELECT * FROM sub_lesson_tests WHERE sub_lesson_id = {$sub_lesson['id']}");
                                                            while ($question = $questions->fetch_assoc()):
                                                            ?>
                                                                <tr>
                                                                    <td><?php echo $question['id']; ?></td>
                                                                    <td><?php echo htmlspecialchars($question['question_text']); ?></td>
                                                                    <td><?php echo htmlspecialchars($question['option_a']); ?></td>
                                                                    <td><?php echo htmlspecialchars($question['option_b']); ?></td>
                                                                    <td><?php echo htmlspecialchars($question['option_c']); ?></td>
                                                                    <td><?php echo htmlspecialchars($question['option_d']); ?></td>
                                                                    <td><?php echo htmlspecialchars($question['correct_answer']); ?></td>
                                                                    <td>
                                                                        <a class="delete-btn" href="?delete_test_question=<?php echo $question['id']; ?>" onclick="return confirm('X√°c nh·∫≠n x√≥a?')">X√≥a</a>
                                                                    </td>
                                                                </tr>
                                                            <?php endwhile; ?>
                                                        </table>
                                                    </div>
                                                </td>
                                                <td><?php echo htmlspecialchars($sub_lesson['description']); ?></td>
                                                <td><?php echo $sub_lesson['order_number']; ?></td>
                                                <td><a href="<?php echo $sub_lesson['content_file']; ?>" target="_blank">Xem</a></td>
                                                <td><a href="<?php echo $sub_lesson['video_file']; ?>" target="_blank">Xem</a></td>
                                                <td>
                                                    <a class="delete-btn" href="?delete_sub_lesson=<?php echo $sub_lesson['id']; ?>" onclick="return confirm('X√°c nh·∫≠n x√≥a?')">X√≥a</a>
                                                </td>
                                            </tr>
                                        <?php endwhile; ?>
                                    </table>
                                </div>
                            </td>
                            <td><?php echo number_format($course['price'], 0, ',', '.'); ?> VNƒê</td>
                            <td><?php echo htmlspecialchars($course['teacher_name']); ?></td>
                            <td>
                                <?php if (file_exists($course['image'])): ?>
                                    <img src="<?php echo $course['image']; ?>" alt="·∫¢nh">
                                <?php else: ?>
                                    <span>H√¨nh ·∫£nh kh√¥ng t·ªìn t·∫°i</span>
                                <?php endif; ?>
                            </td>
                            <td><a href="<?php echo $course['content_file']; ?>" target="_blank">Xem</a></td>
                            <td><a href="<?php echo $course['video_file']; ?>" target="_blank">Xem</a></td>
                            <td>
                                <a href="course_detail.php?id=<?php echo $course['id']; ?>">Xem chi ti·∫øt</a>
                                <a class="delete-btn" href="?delete_course=<?php echo $course['id']; ?>" onclick="return confirm('X√°c nh·∫≠n x√≥a?')">X√≥a</a>
                            </td>
                        </tr>
                    <?php endwhile; ?>
                </table>
                <?php $result_courses->close(); ?>
            </div>

            <div id="contacts" class="content-section">
                <h1>Qu·∫£n L√Ω Tin Nh·∫Øn Li√™n H·ªá</h1>
                <table>
                    <tr><th>ID</th><th>Ng∆∞·ªùi g·ª≠i</th><th>Tin nh·∫Øn</th><th>Tr·∫°ng th√°i</th><th>Ph·∫£n h·ªìi</th><th>Th·ªùi gian g·ª≠i</th><th>H√†nh ƒë·ªông</th></tr>
                    <?php while ($contact = $result_contacts->fetch_assoc()): ?>
                        <tr>
                            <td><?php echo $contact['id']; ?></td>
                            <td><?php echo htmlspecialchars($contact['username']); ?></td>
                            <td><?php echo htmlspecialchars($contact['message']); ?></td>
                            <td><?php echo $contact['status'] === 'pending' ? 'Ch·ªù x·ª≠ l√Ω' : 'ƒê√£ ph·∫£n h·ªìi'; ?></td>
                            <td><?php echo $contact['reply'] ? htmlspecialchars($contact['reply']) : 'Ch∆∞a c√≥'; ?></td>
                            <td><?php echo date('d/m/Y H:i', strtotime($contact['created_at'])); ?></td>
                            <td>
                                <?php if ($contact['status'] === 'pending'): ?>
                                    <button class="reply-btn" data-id="<?php echo $contact['id']; ?>" data-message="<?php echo htmlspecialchars(json_encode($contact['message'], JSON_HEX_QUOT | JSON_HEX_APOS), ENT_QUOTES, 'UTF-8'); ?>">Ph·∫£n h·ªìi</button>
                                <?php endif; ?>
                            </td>
                        </tr>
                    <?php endwhile; ?>
                </table>

                <div id="replyForm" style="display: none; margin-top: 20px;">
                    <form method="POST">
                        <input type="hidden" name="contact_id" id="contactId">
                        <p><strong>Tin nh·∫Øn:</strong> <span id="messagePreview"></span></p>
                        <textarea name="reply" placeholder="Nh·∫≠p ph·∫£n h·ªìi c·ªßa b·∫°n" required></textarea>
                        <button type="submit" name="reply_message">G·ª≠i ph·∫£n h·ªìi</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <script>
        function showSection(sectionId) {
            document.querySelectorAll('.content-section').forEach(s => s.classList.remove('active'));
            document.querySelectorAll('.sidebar li').forEach(l => l.classList.remove('active'));
            document.getElementById(sectionId).classList.add('active');
            document.querySelector(`li[onclick="showSection('${sectionId}')"]`).classList.add('active');
        }

        function showReplyForm(id, message) {
            console.log('showReplyForm called with id:', id, 'message:', message); // Debug
            const replyForm = document.getElementById('replyForm');
            if (replyForm) {
                replyForm.style.display = 'block';
                document.getElementById('contactId').value = id;
                document.getElementById('messagePreview').textContent = message;
            } else {
                console.error('replyForm element not found'); // Debug
            }
        }

        document.addEventListener('DOMContentLoaded', () => {
            // G√°n s·ª± ki·ªán cho c√°c n√∫t "Ph·∫£n h·ªìi"
            document.querySelectorAll('.reply-btn').forEach(button => {
                button.addEventListener('click', () => {
                    const id = button.getAttribute('data-id');
                    const message = JSON.parse(button.getAttribute('data-message'));
                    showReplyForm(id, message);
                });
            });

            // G√°n s·ª± ki·ªán cho t·∫•t c·∫£ c√°c accordion (c·∫£ kh√≥a h·ªçc v√† b√†i h·ªçc con)
            document.querySelectorAll('.accordion-header').forEach(header => {
                header.addEventListener('click', () => {
                    const content = header.nextElementSibling;
                    const arrow = header.querySelector('span:last-child');
                    content.classList.toggle('active');
                    arrow.textContent = content.classList.contains('active') ? '‚ñ≤' : '‚ñº';
                });
            });

            // Bi·ªÉu ƒë·ªì ng∆∞·ªùi d√πng
            new Chart(document.getElementById('dashboardUserChart'), {
                type: 'bar',
                data: {
                    labels: ['T·ªïng ng∆∞·ªùi d√πng', 'Ng∆∞·ªùi d√πng m·ªõi', 'Ho·∫°t ƒë·ªông'],
                    datasets: [{
                        label: 'S·ªë l∆∞·ª£ng',
                        data: [<?php echo $total_users; ?>, <?php echo rand(0, $total_users); ?>, <?php echo rand(0, $total_users); ?>],
                        backgroundColor: ['#36A2EB', '#4BC0C0', '#FF9F40']
                    }]
                },
                options: { scales: { y: { beginAtZero: true } } }
            });

            // Bi·ªÉu ƒë·ªì kh√≥a h·ªçc ph·ªï bi·∫øn
            const courseLabels = <?php echo json_encode(array_keys($popular_courses)); ?>;
            const courseData = <?php echo json_encode(array_values($popular_courses)); ?>;
            new Chart(document.getElementById('popularCoursesChart'), {
                type: 'bar',
                data: {
                    labels: courseLabels.length ? courseLabels : ['Kh√¥ng c√≥ d·ªØ li·ªáu'],
                    datasets: [{
                        label: 'L∆∞·ª£t th√≠ch',
                        data: courseData.length ? courseData : [0],
                        backgroundColor: '#9966FF'
                    }]
                },
                options: { scales: { y: { beginAtZero: true } } }
            });
        });
    </script>
</body>
</html>
<?php $conn->close(); ?>
  ----- üîö H·∫øt file: admin\admin.php -----

  - üìÑ check_test.php

  ----- üìÑ N·ªôi dung file: admin\check_test.php -----
<?php
session_start(); // [source: 401]
require_once '../config/config.php'; // [source: 401]

// Ki·ªÉm tra ƒëƒÉng nh·∫≠p
if (!isset($_SESSION['user_id'])) { // [source: 401]
    header("Location: ../auth/login.php");
    exit();
}

// L·∫•y ID b√†i h·ªçc v√† kh√≥a h·ªçc t·ª´ URL, l·ªçc d·ªØ li·ªáu
$sub_lesson_id = filter_var($_GET['sub_lesson_id'] ?? 0, FILTER_SANITIZE_NUMBER_INT); // [source: 402]
$course_id = filter_var($_GET['course_id'] ?? 0, FILTER_SANITIZE_NUMBER_INT); // [source: 402]

// Ki·ªÉm tra ID h·ª£p l·ªá
if (!$sub_lesson_id || !$course_id) { // [source: 403]
    // Ghi log l·ªói ho·∫∑c hi·ªÉn th·ªã th√¥ng b√°o th√¢n thi·ªán h∆°n
    error_log("Thi·∫øu th√¥ng tin b√†i h·ªçc ho·∫∑c kh√≥a h·ªçc: sub_lesson_id=$sub_lesson_id, course_id=$course_id");
    die("L·ªói: Thi·∫øu th√¥ng tin b√†i h·ªçc ho·∫∑c kh√≥a h·ªçc c·∫ßn thi·∫øt."); // [source: 403]
}

// L·∫•y th√¥ng tin b√†i h·ªçc con
$stmt_lesson = $conn->prepare("SELECT title FROM sub_lessons WHERE id = ?"); // [source: 404] (Ch·ªâ c·∫ßn title)
if ($stmt_lesson === false) {
    error_log("L·ªói Prepare Statement (lesson): " . $conn->error);
    die("L·ªói h·ªá th·ªëng khi l·∫•y th√¥ng tin b√†i h·ªçc.");
}
$stmt_lesson->bind_param("i", $sub_lesson_id); // [source: 404]
$stmt_lesson->execute(); // [source: 404]
$result_lesson = $stmt_lesson->get_result();
$sub_lesson = $result_lesson->fetch_assoc(); // [source: 404]
$stmt_lesson->close();

if (!$sub_lesson) {
     error_log("Kh√¥ng t√¨m th·∫•y b√†i h·ªçc v·ªõi ID: $sub_lesson_id");
     die("L·ªói: B√†i h·ªçc kh√¥ng t·ªìn t·∫°i!"); // [source: 404]
}


// L·∫•y danh s√°ch c√¢u h·ªèi ki·ªÉm tra cho b√†i h·ªçc n√†y
$test_stmt = $conn->prepare("SELECT id, question_text, option_a, option_b, option_c, option_d FROM sub_lesson_tests WHERE sub_lesson_id = ?"); // [source: 405] (Kh√¥ng l·∫•y correct_answer ·ªü ƒë√¢y n·ªØa)
if ($test_stmt === false) {
    error_log("L·ªói Prepare Statement (questions): " . $conn->error);
    die("L·ªói h·ªá th·ªëng khi l·∫•y c√¢u h·ªèi ki·ªÉm tra.");
}
$test_stmt->bind_param("i", $sub_lesson_id); // [source: 405]
$test_stmt->execute(); // [source: 405]
$questions = $test_stmt->get_result(); // [source: 405]

?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i ki·ªÉm tra: <?php echo htmlspecialchars($sub_lesson['title']); ?> - English Learning</title>
    <link rel="stylesheet" href="../style.css"> <style>
        body {
            margin: 0; /* [source: 407] */
            font-family: Arial, sans-serif; /* [source: 407] */
            background-color: #f4f4f4; /* [source: 407] */
        }

        .test-container {
            width: 90%; /* [source: 408] */
            max-width: 800px; /* [source: 408] */
            margin: 40px auto; /* [source: 408] */
            padding: 30px; /* [source: 408] (TƒÉng padding) */
            background: #fff; /* [source: 408] */
            border-radius: 10px; /* [source: 408] */
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); /* [source: 409] (TƒÉng shadow) */
        }

        .test-container h2 {
            font-size: 28px; /* [source: 410] */
            font-weight: 700; /* [source: 410] */
            color: #2c3e50; /* [source: 410] */
            text-align: center; /* [source: 410] */
            margin-bottom: 30px; /* [source: 410] (TƒÉng margin) */
        }

        .question {
            margin-bottom: 25px; /* [source: 411] (TƒÉng margin) */
            padding-bottom: 20px; /* Th√™m padding d∆∞·ªõi */
            border-bottom: 1px solid #eee; /* Th√™m ƒë∆∞·ªùng k·∫ª ph√¢n c√°ch */
        }
         .question:last-child {
             border-bottom: none; /* B·ªè ƒë∆∞·ªùng k·∫ª cho c√¢u cu·ªëi */
             margin-bottom: 0;
             padding-bottom: 0;
         }

        .question p { /* N·ªôi dung c√¢u h·ªèi */
            font-size: 18px; /* [source: 412] (TƒÉng font-size) */
            font-weight: 500; /* [source: 412] */
            color: #34495e; /* [source: 412] (ƒê·ªïi m√†u) */
            margin-bottom: 15px; /* [source: 412] (TƒÉng margin) */
        }

        .option {
            margin: 8px 0; /* [source: 413] */
            display: flex; /* [source: 413] */
            align-items: center; /* [source: 413] */
        }

        .option input[type="radio"] {
            margin-right: 10px; /* [source: 414] */
            width: 18px; /* Ph√≥ng to radio button */
            height: 18px; /* Ph√≥ng to radio button */
            cursor: pointer;
        }
         .option input[type="radio"]:disabled {
             cursor: not-allowed; /* Con tr·ªè khi b·ªã v√¥ hi·ªáu h√≥a */
         }

        .option label {
            font-size: 16px;
            color: #2c3e50;
            cursor: pointer;
            transition: all 0.2s ease; /* Hi·ªáu ·ª©ng khi hover/ch·ªçn */
        }

        /* --- CSS CHO HI·ªÇN TH·ªä ƒê√öNG/SAI --- */
        .option label.user-correct {
            color: #28a745; /* M√†u xanh l√° */
            font-weight: bold;
        }
        .option label.user-incorrect {
            color: #dc3545; /* M√†u ƒë·ªè */
            text-decoration: line-through; /* G·∫°ch ngang c√¢u sai */
        }
        .option label.correct-answer {
            background-color: #d4edda; /* N·ªÅn xanh l√° nh·∫°t */
            padding: 3px 6px;
            border-radius: 4px;
            border: 1px solid #c3e6cb;
            font-weight: bold;
            margin-left: 5px; /* Kho·∫£ng c√°ch nh·ªè n·∫øu l√† ƒë√°p √°n ƒë√∫ng */
        }
         .option label .feedback-text { /* Style cho text (B·∫°n ch·ªçn ƒë√∫ng/sai) */
             font-style: italic;
             font-size: 0.9em;
             margin-left: 8px;
         }
        /* --- H·∫æT CSS ƒê√öNG/SAI --- */


        .test-container button[type="submit"] { /* N√∫t n·ªôp b√†i */
            display: block; /* [source: 415] */
            background: linear-gradient(90deg, #3498db, #2980b9); /* [source: 415] */
            color: #fff; /* [source: 415] */
            border: none; /* [source: 415] */
            padding: 12px 25px; /* [source: 415] (TƒÉng padding) */
            border-radius: 25px; /* [source: 415] */
            font-weight: 600; /* [source: 415] */
            cursor: pointer; /* [source: 415] */
            margin: 30px auto 0; /* [source: 416] (TƒÉng margin top) */
            transition: background 0.3s, transform 0.2s; /* Th√™m transition */
        }

        .test-container button[type="submit"]:hover {
            background: linear-gradient(90deg, #2980b9, #2471a3); /* [source: 417] */
            transform: translateY(-2px); /* Hi·ªáu ·ª©ng hover */
        }

        .test-result { /* Khung hi·ªÉn th·ªã k·∫øt qu·∫£ t·ªïng */
            margin-top: 30px; /* [source: 418] (TƒÉng margin) */
            padding: 15px; /* [source: 418] */
            border-radius: 8px; /* [source: 418] */
            text-align: center; /* [source: 418] */
            font-weight: 600; /* [source: 418] */
            display: none; /* [source: 419] */
        }

        .test-result.success { /* Style khi th√†nh c√¥ng */
            background: #d4edda; /* [source: 420] */
            color: #155724; /* [source: 420] (ƒê·ªïi m√†u ƒë·∫≠m h∆°n) */
            border: 1px solid #c3e6cb; /* Th√™m border */
        }

        .test-result.error { /* Style khi l·ªói */
            background: #f8d7da; /* [source: 421] */
            color: #721c24; /* [source: 421] (ƒê·ªïi m√†u ƒë·∫≠m h∆°n) */
            border: 1px solid #f5c6cb; /* Th√™m border */
        }

        .back-btn { /* N√∫t quay l·∫°i b√†i h·ªçc */
            display: block; /* [source: 422] */
            width: fit-content; /* [source: 422] (ƒê·ªÉ n√∫t v·ª´a v·ªõi n·ªôi dung) */
            margin: 30px auto 0; /* [source: 422] (TƒÉng margin top) */
            text-align: center; /* [source: 422] */
            background: linear-gradient(90deg, #6c757d, #5a6268); /* M√†u x√°m */
            color: #fff; /* [source: 423] */
            padding: 12px 25px; /* [source: 423] (ƒê·ªìng b·ªô padding) */
            border-radius: 25px; /* [source: 423] */
            text-decoration: none; /* [source: 423] */
            font-weight: 600; /* [source: 423] */
             transition: background 0.3s, transform 0.2s; /* Th√™m transition */
        }

        .back-btn:hover {
            background: linear-gradient(90deg, #5a6268, #4e555b); /* [source: 424] (M√†u x√°m ƒë·∫≠m h∆°n) */
             transform: translateY(-2px); /* Hi·ªáu ·ª©ng hover */
        }

        @media (max-width: 768px) { /* [source: 425] */
            .test-container {
                width: 95%; /* [source: 425] (S·ª≠ d·ª•ng % thay v√¨ 100%) */
                margin: 20px auto; /* [source: 425] */
                padding: 20px; /* [source: 425] (Gi·∫£m padding) */
            }
             .test-container h2 {
                 font-size: 24px; /* Gi·∫£m size ti√™u ƒë·ªÅ */
             }
             .question p {
                 font-size: 16px; /* Gi·∫£m size c√¢u h·ªèi */
             }
             .option label {
                 font-size: 15px; /* Gi·∫£m size l·ª±a ch·ªçn */
             }
             .test-container button[type="submit"], .back-btn {
                 padding: 10px 20px; /* Gi·∫£m padding n√∫t */
             }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>B√†i ki·ªÉm tra: <?php echo htmlspecialchars($sub_lesson['title']); ?></h2>

        <form id="test-form" data-lesson-id="<?php echo $sub_lesson_id; ?>">
            <?php if ($questions->num_rows > 0): ?>
                <?php $question_index = 1; ?>
                <?php while ($question = $questions->fetch_assoc()): ?>
                    <div class="question">
                        <p><?php echo $question_index++ . '. ' . htmlspecialchars($question['question_text']); ?></p>
                        <?php foreach (['A', 'B', 'C', 'D'] as $option_char): ?>
                            <?php $option_key = 'option_' . strtolower($option_char); ?>
                            <?php if (!empty($question[$option_key])): ?>
                                <div class="option">
                                    <input type="radio" name="q<?php echo $question['id']; ?>" value="<?php echo $option_char; ?>" id="q<?php echo $question['id']; ?>_<?php echo strtolower($option_char); ?>">
                                    <label for="q<?php echo $question['id']; ?>_<?php echo strtolower($option_char); ?>"><?php echo htmlspecialchars($question[$option_key]); ?></label>
                                </div>
                            <?php endif; ?>
                        <?php endforeach; ?>
                    </div>
                <?php endwhile; ?>
                <button type="submit">N·ªôp b√†i</button>
            <?php else: ?>
                <p style="text-align: center; color: #6c757d;">Ch∆∞a c√≥ c√¢u h·ªèi ki·ªÉm tra cho b√†i h·ªçc n√†y.</p>
            <?php endif; ?>
        </form>

        <div class="test-result" id="test-result"></div>

        <a href="course_detail.php?id=<?php echo $course_id; ?>" class="back-btn" id="back-btn">Quay l·∫°i b√†i h·ªçc</a>
    </div>

    <script>
        document.getElementById('test-form').addEventListener('submit', async (e) => {
            e.preventDefault(); // NgƒÉn form g·ª≠i theo c√°ch truy·ªÅn th·ªëng
            const lessonId = e.target.dataset.lessonId; // L·∫•y lesson_id t·ª´ attribute
            const resultDiv = document.getElementById('test-result'); // Div hi·ªÉn th·ªã k·∫øt qu·∫£ t·ªïng
            const form = e.target; // Form l√†m b√†i
            const submitButton = form.querySelector('button[type="submit"]'); // N√∫t n·ªôp b√†i
            const backButton = document.getElementById('back-btn'); // N√∫t quay l·∫°i

            // V√¥ hi·ªáu h√≥a n√∫t n·ªôp b√†i ƒë·ªÉ tr√°nh g·ª≠i nhi·ªÅu l·∫ßn
            submitButton.disabled = true;
            submitButton.textContent = 'ƒêang x·ª≠ l√Ω...';

            // Thu th·∫≠p c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng
            const formData = new FormData(form); // [source: 437]
            const answers = {};
            formData.forEach((value, key) => {
                answers[key] = value; // [source: 437]
            });

            try {
                 // G·ª≠i d·ªØ li·ªáu l√™n server ƒë·ªÉ ch·∫•m ƒëi·ªÉm
                const response = await fetch('check_test.php', {
                    method: 'POST', // [source: 438]
                    headers: { 'Content-Type': 'application/json' }, // [source: 438]
                    body: JSON.stringify({ lesson_id: lessonId, answers }) // [source: 438]
                });

                // Ki·ªÉm tra response t·ª´ server
                if (!response.ok) {
                    throw new Error(`L·ªói m·∫°ng: ${response.statusText}`);
                }

                const result = await response.json(); // Parse k·∫øt qu·∫£ JSON // [source: 439]

                // Hi·ªÉn th·ªã th√¥ng b√°o k·∫øt qu·∫£ t·ªïng qu√°t
                resultDiv.className = `test-result ${result.success ? 'success' : 'error'}`; // [source: 439]
                resultDiv.textContent = result.message || (result.success ? 'N·ªôp b√†i th√†nh c√¥ng!' : 'C√≥ l·ªói x·∫£y ra.'); // [source: 439]
                resultDiv.style.display = 'block'; // [source: 439]

                // X·ª≠ l√Ω hi·ªÉn th·ªã chi ti·∫øt ƒë√∫ng/sai n·∫øu th√†nh c√¥ng v√† c√≥ details
                if (result.success && result.details) {
                    result.details.forEach(detail => {
                        const questionId = detail.question_id;
                        // T√¨m kh·ªëi div.question t∆∞∆°ng ·ª©ng b·∫±ng c√°ch t√¨m input c√≥ name=q[id] r·ªìi l·∫•y cha g·∫ßn nh·∫•t l√† .question
                        const questionBlock = form.querySelector(`input[name="q${questionId}"]`)?.closest('.question');

                        if (questionBlock) {
                            const options = questionBlock.querySelectorAll('input[type="radio"]');
                            options.forEach(option => {
                                option.disabled = true; // V√¥ hi·ªáu h√≥a c√°c l·ª±a ch·ªçn sau khi n·ªôp b√†i
                                const label = questionBlock.querySelector(`label[for="${option.id}"]`); // T√¨m label t∆∞∆°ng ·ª©ng
                                if (!label) return; // B·ªè qua n·∫øu kh√¥ng t√¨m th·∫•y label

                                let feedbackText = ''; // Text th√™m v√†o cu·ªëi label (vd: B·∫°n ch·ªçn ƒë√∫ng)
                                // ƒê√°nh d·∫•u c√¢u tr·∫£ l·ªùi c·ªßa ng∆∞·ªùi d√πng
                                if (option.value === detail.user_answer) {
                                    label.classList.add(detail.is_correct ? 'user-correct' : 'user-incorrect');
                                    feedbackText = detail.is_correct ? ' (B·∫°n ch·ªçn ƒë√∫ng)' : ' (B·∫°n ch·ªçn sai)';
                                }

                                // ƒê√°nh d·∫•u ƒë√°p √°n ƒë√∫ng (lu√¥n hi·ªÉn th·ªã)
                                if (option.value === detail.correct_answer) {
                                    label.classList.add('correct-answer');
                                    // Ch·ªâ th√™m text "(ƒê√°p √°n ƒë√∫ng)" n·∫øu n√≥ kh√°c v·ªõi l·ª±a ch·ªçn c·ªßa ng∆∞·ªùi d√πng HO·∫∂C ng∆∞·ªùi d√πng kh√¥ng ch·ªçn c√¢u n√†y
                                    if (option.value !== detail.user_answer || detail.user_answer === null) {
                                         // N·∫øu ƒë√°p √°n ƒë√∫ng kh√¥ng ph·∫£i l√† c√°i user ch·ªçn sai, ho·∫∑c user kh√¥ng ch·ªçn g√¨ c·∫£
                                         if (!label.classList.contains('user-incorrect')) {
                                             feedbackText += ' (ƒê√°p √°n ƒë√∫ng)';
                                         }
                                    }
                                }
                                // Th√™m text ph·∫£n h·ªìi v√†o cu·ªëi label n·∫øu c√≥
                                if (feedbackText) {
                                    label.innerHTML += `<span class="feedback-text">${feedbackText}</span>`;
                                }

                            });
                        } else {
                             console.warn(`Kh√¥ng t√¨m th·∫•y kh·ªëi c√¢u h·ªèi cho ID: ${questionId}`);
                        }
                    });
                     // ·∫®n form sau khi hi·ªÉn th·ªã chi ti·∫øt
                     // form.style.display = 'none'; // Gi·ªù kh√¥ng ·∫©n form n·ªØa m√† ch·ªâ v√¥ hi·ªáu h√≥a
                     submitButton.style.display = 'none'; // ·∫®n n√∫t n·ªôp b√†i
                } else if (result.success) {
                    // Tr∆∞·ªùng h·ª£p th√†nh c√¥ng nh∆∞ng kh√¥ng c√≥ details (d·ª± ph√≤ng)
                     // form.style.display = 'none';
                      submitButton.style.display = 'none'; // ·∫®n n√∫t n·ªôp b√†i
                } else {
                     // Tr∆∞·ªùng h·ª£p c√≥ l·ªói t·ª´ server (result.success = false)
                     submitButton.disabled = false; // Cho ph√©p th·ª≠ l·∫°i
                     submitButton.textContent = 'N·ªôp b√†i';
                }


                // ·∫®n n√∫t submit v√† hi·ªÉn th·ªã n√∫t quay l·∫°i (di chuy·ªÉn ra ngo√†i ƒë·ªÉ lu√¥n th·ª±c hi·ªán)
                // form.style.display = 'none'; // [source: 440] - Kh√¥ng ·∫©n form n·ªØa
                // submitButton.style.display = 'none'; // ·∫®n n√∫t submit sau khi x·ª≠ l√Ω xong
                // backButton.style.display = 'block'; // Hi·ªÉn th·ªã n√∫t quay l·∫°i // [source: 440] - N√∫t n√†y ƒë√£ hi·ªÉn th·ªã s·∫µn

            } catch (error) {
                 console.error('L·ªói khi n·ªôp b√†i:', error);
                 resultDiv.className = 'test-result error';
                 resultDiv.textContent = `L·ªói: ${error.message}. Vui l√≤ng th·ª≠ l·∫°i.`;
                 resultDiv.style.display = 'block';
                 // Cho ph√©p ng∆∞·ªùi d√πng th·ª≠ l·∫°i n·∫øu c√≥ l·ªói m·∫°ng ho·∫∑c l·ªói kh√°c
                 submitButton.disabled = false;
                 submitButton.textContent = 'N·ªôp b√†i';
            }
        });
    </script>

</body>
</html>
<?php
// ƒê√≥ng c√°c k·∫øt n·ªëi CSDL
if (isset($test_stmt)) $test_stmt->close(); // [source: 440]
if (isset($conn)) $conn->close(); // [source: 440]
?>
  ----- üîö H·∫øt file: admin\check_test.php -----

  - üìÑ course_detail.php

  ----- üìÑ N·ªôi dung file: admin\course_detail.php -----
<?php
session_start();
require_once '../config/config.php';

if (!isset($_SESSION['user_id'])) {
    header("Location: ../auth/login.php");
    exit();
}

$course_id = filter_var($_GET['id'] ?? 0, FILTER_SANITIZE_NUMBER_INT);

// L·∫•y th√¥ng tin kh√≥a h·ªçc
$stmt = $conn->prepare("SELECT * FROM courses WHERE id = ?");
$stmt->bind_param("i", $course_id);
$stmt->execute();
$course = $stmt->get_result()->fetch_assoc() ?: die("Kh√≥a h·ªçc kh√¥ng t·ªìn t·∫°i!");

// L·∫•y danh s√°ch b√†i h·ªçc con
$stmt = $conn->prepare("SELECT * FROM sub_lessons WHERE course_id = ? ORDER BY order_number ASC");
$stmt->bind_param("i", $course_id);
$stmt->execute();
$sub_lessons = $stmt->get_result();
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><?php echo htmlspecialchars($course['title']); ?> - English Learning</title>
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #80deea);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex: 1;
        }
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .logo a {
            color: #fff;
            text-decoration: none;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #00bcd4;
        }
        .course-detail-container {
            width: 98%;
            max-width: none;
            margin: 20px auto;
            padding: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            box-sizing: border-box;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .course-header {
            width: 100%;
            text-align: center;
            margin-bottom: 30px;
        }
        .course-header h1 {
            font-size: 36px;
            font-weight: 700;
            color: #006064;
            margin-bottom: 10px;
        }
        .course-header p {
            font-size: 18px;
            color: #7f8c8d;
            max-width: 800px;
            margin: 0 auto;
        }
        .content-wrapper {
            display: flex;
            width: 100%;
            gap: 20px;
        }
        .left-content {
            flex: 1;
            min-width: 300px;
        }
        .right-content {
            width: 800px;
            position: sticky;
            top: 20px;
            align-self: flex-start;
            display: none;
        }
        .right-content.active {
            display: block;
        }
        .sub-lesson {
            margin-bottom: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 10px;
            overflow: hidden;
            background: #f9fbfd;
        }
        .sub-lesson-header {
            background: #e0f7fa;
            padding: 15px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        .sub-lesson-header h3 {
            font-size: 20px;
            color: #34495e;
        }
        .sub-lesson-header span {
            font-size: 24px;
            color: #3498db;
        }
        .sub-lesson-content {
            display: none;
            padding: 20px;
            background: #fff;
        }
        .sub-lesson-content.active {
            display: block;
        }
        .sub-lesson-content p {
            font-size: 16px;
            color: #2c3e50;
            margin-bottom: 15px;
        }
        .document-button {
            display: inline-block;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: #fff;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin-bottom: 15px;
        }
        .document-button:hover {
            background: linear-gradient(90deg, #27ae60, #219653);
        }
        .video-container {
            margin-bottom: 15px;
        }
        .video-container video {
            width: 100%;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }
        .test-button {
            display: inline-block;
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: #fff;
            padding: 10px 20px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
            margin-top: 10px;
        }
        .test-button:hover {
            background: linear-gradient(90deg, #2980b9, #2471a3);
        }
        .back-btn {
            display: block;
            width: 200px;
            margin: 30px auto;
            text-align: center;
            background: linear-gradient(90deg, #dc3545, #c82333);
            color: #fff;
            padding: 12px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
        }
        .back-btn:hover {
            background: linear-gradient(90deg, #c82333, #bd2130);
        }
        footer {
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
        }
        footer a {
            color: #fff;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        footer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
            }
            nav {
                margin-top: 10px;
            }
            nav a {
                margin: 5px;
            }
            .course-detail-container {
                width: 100%;
                margin: 10px auto;
                padding: 10px;
            }
            .content-wrapper {
                flex-direction: column;
            }
            .right-content {
                width: 100%;
                position: static;
            }
            .video-container video {
                max-width: 100%;
            }
            footer div {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
<?php include '../searchbar/index.php'; ?>
<script src="../searchbar/js/script.js"></script>
    <header>
        <div class="logo"><a href="../admin/dashboard.php">English Learning</a></div>
        <nav>
            <a href="../admin/dashboard.php">Trang ch·ªß</a>
            <a href="../test/select_test.php">Thi th·ª≠</a>
            <a href="../profile.php">H·ªì s∆°</a>
            <a href="../contact.php">Li√™n h·ªá</a>
            <a href="../auth/logout.php" style="color: #ff5252;">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <main>
        <div class="course-detail-container">
            <div class="course-header">
                <h1><?php echo htmlspecialchars($course['title']); ?></h1>
                <p><?php echo htmlspecialchars($course['description']); ?></p>
            </div>

            <div class="content-wrapper">
                <div class="left-content">
                    <div class="sub-lessons">
                        <?php if ($sub_lessons->num_rows > 0): ?>
                            <?php while ($lesson = $sub_lessons->fetch_assoc()): ?>
                                <div class="sub-lesson">
                                    <div class="sub-lesson-header">
                                        <h3><?php echo htmlspecialchars($lesson['title']); ?></h3>
                                        <span>‚ñº</span>
                                    </div>
                                    <div class="sub-lesson-content">
                                        <?php if ($lesson['content_file']): ?>
                                            <a href="<?php echo htmlspecialchars($lesson['content_file']); ?>" class="document-button" target="_blank">T√†i li·ªáu h·ªçc</a>
                                        <?php endif; ?>
                                        <p><?php echo htmlspecialchars($lesson['description']); ?></p>
                                        <a href="test_page.php?sub_lesson_id=<?php echo $lesson['id']; ?>&course_id=<?php echo $course_id; ?>" class="test-button">L√†m b√†i ki·ªÉm tra</a>
                                    </div>
                                </div>
                            <?php endwhile; ?>
                        <?php else: ?>
                            <p>Ch∆∞a c√≥ b√†i h·ªçc con n√†o cho kh√≥a h·ªçc n√†y.</p>
                        <?php endif; ?>
                    </div>
                </div>

                <div class="right-content">
                    <?php if ($sub_lessons->num_rows > 0): ?>
                        <?php $sub_lessons->data_seek(0); ?>
                        <?php while ($lesson = $sub_lessons->fetch_assoc()): ?>
                            <?php if ($lesson['video_file']): ?>
                                <div class="video-container" data-lesson-id="<?php echo $lesson['id']; ?>" style="display: none;">
                                    <video controls>
                                        <source src="<?php echo htmlspecialchars($lesson['video_file']); ?>" type="video/mp4">
                                        Tr√¨nh duy·ªát kh√¥ng h·ªó tr·ª£ video.
                                    </video>
                                </div>
                            <?php endif; ?>
                        <?php endwhile; ?>
                    <?php endif; ?>
                </div>
            </div>

            <a href="../admin/dashboard.php" class="back-btn">Quay l·∫°i Dashboard</a>
        </div>
    </main>

    <footer>
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-bottom: 20px;">
                <div>
                    <h3>English Learning</h3>
                    <p>H·ªçc ti·∫øng Anh d·ªÖ d√†ng v√† hi·ªáu qu·∫£!</p>
                </div>
                <div>
                    <h3>Li√™n k·∫øt</h3>
                    <a href="../about.php">Gi·ªõi thi·ªáu</a>
                    <a href="../contact.php">Li√™n h·ªá</a>
                    <a href="../policy.php">Ch√≠nh s√°ch</a>
                </div>
                <div>
                    <h3>Li√™n h·ªá</h3>
                    <p>Email: support@englishlearning.com</p>
                    <p>Hotline: 0123 456 789</p>
                </div>
            </div>
            <p>¬© 2025 English Learning. All rights reserved.</p>
        </div>
    </footer>

    <script>
        document.querySelectorAll('.sub-lesson-header').forEach(header => {
            header.addEventListener('click', () => {
                const content = header.nextElementSibling;
                const arrow = header.querySelector('span');
                const isActive = content.classList.contains('active');
                const rightContent = document.querySelector('.right-content');

                if (isActive) {
                    content.classList.remove('active');
                    arrow.textContent = '‚ñº';

                    const lessonId = header.closest('.sub-lesson').querySelector('.test-button')?.getAttribute('href')?.match(/sub_lesson_id=(\d+)/)?.[1];
                    if (lessonId) {
                        const videoContainer = document.querySelector(`.video-container[data-lesson-id="${lessonId}"]`);
                        if (videoContainer && videoContainer.style.display === 'block') {
                            const video = videoContainer.querySelector('video');
                            if (video) {
                                video.pause();
                            }
                            videoContainer.style.display = 'none';
                            rightContent.classList.remove('active');
                        }
                    }

                    const anyActive = document.querySelector('.sub-lesson-content.active');
                    if (!anyActive) {
                        rightContent.classList.remove('active');
                    }
                } else {
                    content.classList.add('active');
                    arrow.textContent = '‚ñ≤';

                    document.querySelectorAll('.video-container').forEach(v => {
                        const video = v.querySelector('video');
                        if (video) {
                            video.pause();
                        }
                        v.style.display = 'none';
                    });

                    const lessonId = header.closest('.sub-lesson').querySelector('.test-button')?.getAttribute('href')?.match(/sub_lesson_id=(\d+)/)?.[1];
                    if (lessonId) {
                        const videoContainer = document.querySelector(`.video-container[data-lesson-id="${lessonId}"]`);
                        if (videoContainer) {
                            videoContainer.style.display = 'block';
                            rightContent.classList.add('active');
                        }
                    }
                }
            });
        });

        const scrollTopBtn = document.createElement('button');
        scrollTopBtn.textContent = '‚Üë';
        scrollTopBtn.style.position = 'fixed';
        scrollTopBtn.style.bottom = '20px';
        scrollTopBtn.style.right = '20px';
        scrollTopBtn.style.background = '#0288d1';
        scrollTopBtn.style.color = '#fff';
        scrollTopBtn.style.padding = '10px';
        scrollTopBtn.style.border = 'none';
        scrollTopBtn.style.borderRadius = '50%';
        scrollTopBtn.style.cursor = 'pointer';
        scrollTopBtn.style.display = 'none';
        document.body.appendChild(scrollTopBtn);

        window.addEventListener('scroll', () => {
            scrollTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none';
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>

<?php $stmt->close(); $conn->close(); ?>
  ----- üîö H·∫øt file: admin\course_detail.php -----

  - üìÑ create_admin.php

  ----- üìÑ N·ªôi dung file: admin\create_admin.php -----
<?php
// K·∫øt n·ªëi ƒë·∫øn c∆° s·ªü d·ªØ li·ªáu
$conn = mysqli_connect('localhost', 'root', '', 'toeicdb');

// Ki·ªÉm tra k·∫øt n·ªëi
if ($conn->connect_error) {
    die("K·∫øt n·ªëi th·∫•t b·∫°i: " . $conn->connect_error);
}

// Ki·ªÉm tra xem t√†i kho·∫£n admin ƒë√£ t·ªìn t·∫°i ch∆∞a
$sql_check = "SELECT COUNT(*) AS count FROM users WHERE email = 'admin@1'";
$result_check = $conn->query($sql_check);
$row = $result_check->fetch_assoc();

if ($row['count'] == 0) {
    // T·∫°o t√†i kho·∫£n admin n·∫øu ch∆∞a t·ªìn t·∫°i
    $username = 'admin';
    $email = 'admin@1';
    $password = '123'; // M·∫≠t kh·∫©u g·ªëc
    $hashed_password = password_hash($password, PASSWORD_DEFAULT); // M√£ h√≥a m·∫≠t kh·∫©u

    // Th√™m t√†i kho·∫£n admin v√†o c∆° s·ªü d·ªØ li·ªáu
    $sql = "INSERT INTO users (username, email, password, role, created_at) 
            VALUES (?, ?, ?, 'admin', NOW())";
    $stmt = $conn->prepare($sql);
    $stmt->bind_param("sss", $username, $email, $hashed_password);

    if ($stmt->execute()) {
        echo "T·∫°o t√†i kho·∫£n admin th√†nh c√¥ng!";
    } else {
        echo "L·ªói: " . $stmt->error;
    }

    $stmt->close();
} else {
    echo "T√†i kho·∫£n admin ƒë√£ t·ªìn t·∫°i!";
}

// ƒê√≥ng k·∫øt n·ªëi
$conn->close();
?>

  ----- üîö H·∫øt file: admin\create_admin.php -----

  - üìÑ dashboard.php

  ----- üìÑ N·ªôi dung file: admin\dashboard.php -----
<?php
session_start();
require_once '../config/config.php';

if (!isset($_SESSION['user_id'])) {
    header("Location: ../auth/login.php");
    exit();
}

$username = $_SESSION['username'];
$result = $conn->query("SELECT * FROM courses");
$popular_courses = $conn->query("SELECT * FROM courses ORDER BY likes DESC LIMIT 3");
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªçc ph·∫ßn <?php echo htmlspecialchars($username); ?></title>
    <link rel="stylesheet" href="../style.css">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        body {
            background: linear-gradient(135deg, #e0f7fa, #80deea); /* Gradient n·ªÅn to√†n trang */
        }
        header a:hover { color: #00bcd4; }
        .hero .btn:hover { opacity: 0.8; }
        .course:hover { transform: translateY(-5px); border: 2px solid #00bcd4; }
        .course img { transition: transform 0.3s; }
        .course:hover img { transform: scale(1.05); }
        footer a:hover { text-decoration: underline; }
        @media (max-width: 768px) {
            header { flex-direction: column; }
            nav { margin-top: 10px; }
            nav a { margin: 5px; }
            footer div { margin-bottom: 20px; }
        }
    </style>
</head>
<body>
    <header style="position: sticky; top: 0; background: linear-gradient(90deg, #006064, #00acc1); color: #fff; padding: 10px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1);">
        <div class="logo" style="font-size: 24px; font-weight: bold;">English Learning</div>
        <nav>
            <a href="dashboard.php" style="color: #fff; text-decoration: none; margin: 0 15px; transition: color 0.3s;">Trang ch·ªß</a>
            <a href="../test/select_test.php" style="color: #fff; text-decoration: none; margin: 0 15px; transition: color 0.3s;">Thi th·ª≠</a>
            <a href="../profile.php" style="color: #fff; text-decoration: none; margin: 0 15px; transition: color 0.3s;">H·ªì s∆°</a>
            <a href="../contact.php" style="color: #fff; text-decoration: none; margin: 0 15px; transition: color 0.3s;">Li√™n h·ªá</a>
            <a href="../auth/logout.php" style="color: #e74c3c; text-decoration: none; margin: 0 15px; transition: color 0.3s;">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <section class="hero" style="background: linear-gradient(135deg, #0288d1, #4fc3f7); color: #fff; text-align: center; padding: 100px 20px;">
        <h1 style="font-size: 48px; animation: fadeIn 1s;">Ch√†o m·ª´ng <?php echo htmlspecialchars($username); ?>!</h1>
        <p style="font-size: 24px; margin: 20px 0;">H·ªçc TI·∫æNG ANH t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao. C√πng nhau chinh ph·ª•c!</p>
        <div>
            <a href="../test/select_test.php" class="btn" style="background: #3498db; color: #fff; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin: 10px;">Thi th·ª≠</a>
            <a href="#courses" class="btn" style="background: #2ecc71; color: #fff; padding: 10px 20px; text-decoration: none; border-radius: 5px; margin: 10px;">Kh√°m ph√° kh√≥a h·ªçc</a>
        </div>
    </section>

    <section class="popular-courses" style="padding: 50px 20px; background: #e0f7fa;">
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Kh√≥a h·ªçc n·ªïi b·∫≠t</h2>
        <div class="course-list" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto;">
            <?php while ($row = $popular_courses->fetch_assoc()): ?>
                <div class="course" style="background: #fff; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1);">
                    <img src="<?php echo htmlspecialchars($row['image'] ?: '../images/default-course.jpg'); ?>" alt="<?php echo htmlspecialchars($row['title']); ?>" style="width: 100%; height: 200px; object-fit: cover;" loading="lazy">
                    <div style="padding: 20px;">
                        <h3><?php echo htmlspecialchars($row['title']); ?></h3>
                        <p><?php echo htmlspecialchars($row['description']); ?></p>
                        <a href="course_detail.php?id=<?php echo $row['id']; ?>" style="display: inline-block; background: #3498db; color: #fff; padding: 10px 20px; text-decoration: none; border-radius: 5px;">H·ªçc ngay</a>
                    </div>
                </div>
            <?php endwhile; ?>
        </div>
    </section>

    <section class="courses" id="courses" style="padding: 50px 20px; background: linear-gradient(135deg, #b3e5fc, #e0f7fa);">
        <h2 style="text-align: center; font-size: 32px; margin-bottom: 30px;">Ch·ªçn kh√≥a h·ªçc</h2>
        <div style="text-align: center; margin-bottom: 20px;">
            <input type="text" id="searchInput" placeholder="T√¨m ki·∫øm kh√≥a h·ªçc..." style="padding: 10px; width: 300px; border: 1px solid #ccc; border-radius: 5px;">
        </div>
        <div class="course-list" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; max-width: 1200px; margin: 0 auto;">
            <?php while ($row = $result->fetch_assoc()): ?>
                <div class="course" style="background: #fff; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); overflow: hidden;">
                    <img src="<?php echo htmlspecialchars($row['image'] ?: '../images/default-course.jpg'); ?>" alt="<?php echo htmlspecialchars($row['title']); ?>" style="width: 100%; height: 200px; object-fit: cover;" loading="lazy">
                    <div style="padding: 20px;">
                        <h3 style="font-size: 24px;"><?php echo htmlspecialchars($row['title']); ?></h3>
                        <p style="color: #666;"><?php echo htmlspecialchars($row['description']); ?></p>
                        <p><strong>Gi·∫£ng vi√™n:</strong> <?php echo htmlspecialchars($row['teacher_name'] ?: 'Ch∆∞a c·∫≠p nh·∫≠t'); ?></p>
                        <p><strong>Gi√°:</strong> <?php echo number_format($row['price'] ?: 0, 0, ',', '.') . ' VNƒê'; ?></p>
                        <a href="course_detail.php?id=<?php echo $row['id']; ?>" style="display: inline-block; background: #3498db; color: #fff; padding: 10px 20px; text-decoration: none; border-radius: 5px;">H·ªçc ngay</a>
                    </div>
                </div>
            <?php endwhile; ?>
        </div>
    </section>

    <footer style="background: linear-gradient(90deg, #006064, #00acc1); color: #fff; padding: 20px; text-align: center;">
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-bottom: 20px;">
                <div>
                    <h3>English Learning</h3>
                    <p>H·ªçc ti·∫øng Anh d·ªÖ d√†ng v√† hi·ªáu qu·∫£!</p>
                </div>
                <div>
                    <h3>Li√™n k·∫øt</h3>
                    <a href="../about.php" style="color: #fff; text-decoration: none; display: block; margin: 5px 0;">Gi·ªõi thi·ªáu</a>
                    <a href="../contact.php" style="color: #fff; text-decoration: none; display: block; margin: 5px 0;">Li√™n h·ªá</a>
                    <a href="../policy.php" style="color: #fff; text-decoration: none; display: block; margin: 5px 0;">Ch√≠nh s√°ch</a>
                </div>
                <div>
                    <h3>Li√™n h·ªá</h3>
                    <p>Email: support@englishlearning.com</p>
                    <p>Hotline: 0123 456 789</p>
                </div>
            </div>
            <p>¬© 2025 English Learning. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // T√¨m ki·∫øm kh√≥a h·ªçc
        document.getElementById('searchInput').addEventListener('input', function(e) {
            const search = e.target.value.toLowerCase();
            document.querySelectorAll('.course').forEach(course => {
                const title = course.querySelector('h3').textContent.toLowerCase();
                const desc = course.querySelector('p').textContent.toLowerCase();
                course.style.display = title.includes(search) || desc.includes(search) ? '' : 'none';
            });
        });

        // Smooth scroll
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({ behavior: 'smooth' });
            });
        });

        // N√∫t quay l·∫°i ƒë·∫ßu trang
        const scrollTopBtn = document.createElement('button');
        scrollTopBtn.textContent = '‚Üë';
        scrollTopBtn.style.position = 'fixed';
        scrollTopBtn.style.bottom = '20px';
        scrollTopBtn.style.right = '20px';
        scrollTopBtn.style.background = '#3498db';
        scrollTopBtn.style.color = '#fff';
        scrollTopBtn.style.padding = '10px';
        scrollTopBtn.style.border = 'none';
        scrollTopBtn.style.borderRadius = '50%';
        scrollTopBtn.style.cursor = 'pointer';
        scrollTopBtn.style.display = 'none';
        document.body.appendChild(scrollTopBtn);

        window.addEventListener('scroll', () => {
            scrollTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none';
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });

       
    </script>
</body>
</html>
  ----- üîö H·∫øt file: admin\dashboard.php -----

  - üìÑ style.css

  ----- üìÑ N·ªôi dung file: admin\style.css -----
/* Reset */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
body { background: #f4f4f4; color: #2c3e50; line-height: 1.6; }

/* Common */
button, a { cursor: pointer; transition: all 0.3s ease; }
button:hover, a:hover { transform: translateY(-2px); }
table { width: 100%; border-collapse: collapse; margin-top: 20px; }
th, td { padding: 12px 15px; border: 1px solid #e0e0e0; text-align: left; }
.success { 
    color: #28a745; 
    background: #d4edda; 
    padding: 10px; 
    border-radius: 8px; 
    text-align: center; 
    margin-bottom: 20px; 
}
.error { 
    color: #dc3545; 
    background: #f8d7da; 
    padding: 10px; 
    border-radius: 8px; 
    text-align: center; 
    margin-bottom: 20px; 
}

/* Admin Container */
.container { 
    display: flex; 
    min-height: 100vh; 
    background: #f0f2f5; 
}

/* Sidebar */
.sidebar { 
    width: 280px; 
    background: linear-gradient(180deg, #2c3e50, #1a252f); 
    padding: 30px 20px; 
    color: #fff; 
    position: fixed; 
    height: 100%; 
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2); 
    transition: width 0.3s ease; 
}
.sidebar h2 { 
    font-size: 24px; 
    font-weight: 700; 
    margin-bottom: 40px; 
    text-align: center; 
    color: #ecf0f1; 
    text-transform: uppercase; 
    letter-spacing: 1px; 
}
.sidebar ul { 
    list-style: none; 
}
.sidebar li { 
    padding: 15px 20px; 
    margin: 10px 0; 
    border-radius: 8px; 
    font-size: 16px; 
    font-weight: 500; 
    cursor: pointer; 
    transition: background 0.3s ease; 
}
.sidebar li:hover { 
    background: #34495e; 
}
.sidebar li.active { 
    background: #3498db; 
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.5); 
}
.sidebar a { 
    color: #fff; 
    text-decoration: none; 
    display: block; 
}

/* Main Content */
.main-content { 
    flex: 1; 
    padding: 40px; 
    margin-left: 280px; 
    background: #f0f2f5; 
}
.content-section { 
    display: none; 
    background: #fff; 
    padding: 30px; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
}
.content-section.active { 
    display: block; 
}
h1 { 
    font-size: 32px; 
    font-weight: 700; 
    color: #2c3e50; 
    margin-bottom: 25px; 
    text-align: center; 
}

/* Form trong Admin */
form { 
    display: grid; 
    gap: 15px; 
    max-width: 600px; 
    margin: 0 auto 30px; 
}
form input, 
form textarea { 
    width: 100%; 
    padding: 12px 15px; 
    border: 2px solid #e0e0e0; 
    border-radius: 8px; 
    font-size: 16px; 
    background: #f9fbfd; 
    transition: border-color 0.3s ease; 
}
form input:focus, 
form textarea:focus { 
    border-color: #3498db; 
    outline: none; 
}
form textarea { 
    min-height: 100px; 
    resize: vertical; 
}
form button { 
    background: linear-gradient(90deg, #28a745, #218838); 
    color: #fff; 
    border: none; 
    padding: 12px; 
    border-radius: 8px; 
    font-weight: 600; 
    text-transform: uppercase; 
}
form button:hover { 
    background: linear-gradient(90deg, #218838, #1e7e34); 
    transform: translateY(-3px); 
}

/* Table trong Admin */
th { 
    background: #f5f5f5; 
    font-weight: 600; 
    color: #34495e; 
}
td img { 
    max-width: 100px; 
    border-radius: 8px; 
    vertical-align: middle; 
}
.delete-btn { 
    color: #dc3545; 
    font-weight: 600; 
    text-decoration: none; 
    padding: 5px 10px; 
    border-radius: 5px; 
    display: inline-block; 
}
.delete-btn:hover { 
    background: #dc3545; 
    color: #fff; 
}

/* Chart Container */
.chart-container { 
    width: 70%; 
    max-width: 800px; 
    margin: 30px auto; 
    padding: 20px; 
    background: #fff; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
}
  ----- üîö H·∫øt file: admin\style.css -----

  - üìÑ test_page.php

  ----- üìÑ N·ªôi dung file: admin\test_page.php -----
<?php
session_start();
require_once '../config/config.php';

if (!isset($_SESSION['user_id'])) {
    header("Location: ../auth/login.php");
    exit();
}

$sub_lesson_id = filter_var($_GET['sub_lesson_id'] ?? 0, FILTER_SANITIZE_NUMBER_INT);
$course_id = filter_var($_GET['course_id'] ?? 0, FILTER_SANITIZE_NUMBER_INT);

if (!$sub_lesson_id || !$course_id) {
    die("Thi·∫øu th√¥ng tin b√†i h·ªçc!");
}

// L·∫•y th√¥ng tin b√†i h·ªçc con
$stmt = $conn->prepare("SELECT * FROM sub_lessons WHERE id = ?");
$stmt->bind_param("i", $sub_lesson_id);
$stmt->execute();
$sub_lesson = $stmt->get_result()->fetch_assoc() ?: die("B√†i h·ªçc kh√¥ng t·ªìn t·∫°i!");

// L·∫•y danh s√°ch c√¢u h·ªèi ki·ªÉm tra
$test_stmt = $conn->prepare("SELECT * FROM sub_lesson_tests WHERE sub_lesson_id = ?");
$test_stmt->bind_param("i", $sub_lesson_id);
$test_stmt->execute();
$questions = $test_stmt->get_result();
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>B√†i ki·ªÉm tra: <?php echo htmlspecialchars($sub_lesson['title']); ?> - TOEIC Learning</title>
    <link rel="stylesheet" href="../style.css">
    <style>
        body {
            margin: 0;
            font-family: Arial, sans-serif;
            background-color: #f4f4f4;
        }

        .test-container {
            width: 90%;
            max-width: 800px;
            margin: 40px auto;
            padding: 20px;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
        }

        .test-container h2 {
            font-size: 28px;
            font-weight: 700;
            color: #2c3e50;
            text-align: center;
            margin-bottom: 20px;
        }

        .question {
            margin-bottom: 20px;
        }

        .question p {
            font-size: 16px;
            font-weight: 500;
            color: #2c3e50;
            margin-bottom: 10px;
        }

        .option {
            margin: 5px 0;
            display: flex;
            align-items: center;
        }

        .option input {
            margin-right: 10px;
        }

        .test-container button {
            display: block;
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: #fff;
            border: none;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px auto;
        }

        .test-container button:hover {
            background: linear-gradient(90deg, #2980b9, #2471a3);
        }

        .test-result {
            margin-top: 20px;
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            font-weight: 600;
            display: none;
        }

        .test-result.success {
            background: #d4edda;
            color: #28a745;
        }

        .test-result.error {
            background: #f8d7da;
            color: #dc3545;
        }

        .back-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            text-align: center;
            background: linear-gradient(90deg, #dc3545, #c82333);
            color: #fff;
            padding: 12px;
            border-radius: 25px;
            text-decoration: none;
            font-weight: 600;
        }

        .back-btn:hover {
            background: linear-gradient(90deg, #c82333, #bd2130);
        }

        @media (max-width: 768px) {
            .test-container {
                width: 100%;
                margin: 20px auto;
                padding: 10px;
            }
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h2>B√†i ki·ªÉm tra: <?php echo htmlspecialchars($sub_lesson['title']); ?></h2>
        <form id="test-form" data-lesson-id="<?php echo $sub_lesson_id; ?>">
            <?php if ($questions->num_rows > 0): ?>
                <?php while ($question = $questions->fetch_assoc()): ?>
                    <div class="question">
                        <p><?php echo htmlspecialchars($question['question_text']); ?></p>
                        <div class="option">
                            <input type="radio" name="q<?php echo $question['id']; ?>" value="A" id="q<?php echo $question['id']; ?>_a">
                            <label for="q<?php echo $question['id']; ?>_a"><?php echo htmlspecialchars($question['option_a']); ?></label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q<?php echo $question['id']; ?>" value="B" id="q<?php echo $question['id']; ?>_b">
                            <label for="q<?php echo $question['id']; ?>_b"><?php echo htmlspecialchars($question['option_b']); ?></label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q<?php echo $question['id']; ?>" value="C" id="q<?php echo $question['id']; ?>_c">
                            <label for="q<?php echo $question['id']; ?>_c"><?php echo htmlspecialchars($question['option_c']); ?></label>
                        </div>
                        <div class="option">
                            <input type="radio" name="q<?php echo $question['id']; ?>" value="D" id="q<?php echo $question['id']; ?>_d">
                            <label for="q<?php echo $question['id']; ?>_d"><?php echo htmlspecialchars($question['option_d']); ?></label>
                        </div>
                    </div>
                <?php endwhile; ?>
                <button type="submit">N·ªôp b√†i</button>
            <?php else: ?>
                <p>Ch∆∞a c√≥ c√¢u h·ªèi ki·ªÉm tra.</p>
            <?php endif; ?>
        </form>
        <div class="test-result" id="test-result"></div>
        <a href="course_detail.php?id=<?php echo $course_id; ?>" class="back-btn" id="back-btn" style="display: none;">Quay l·∫°i b√†i h·ªçc</a>
    </div>

    <script>
        document.getElementById('test-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const lessonId = e.target.dataset.lessonId;
            const resultDiv = document.getElementById('test-result');
            const formData = new FormData(e.target);

            const answers = {};
            formData.forEach((value, key) => {
                answers[key] = value;
            });

            const response = await fetch('check_test.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ lesson_id: lessonId, answers })
            });

            const result = await response.json();
            resultDiv.className = `test-result ${result.success ? 'success' : 'error'}`;
            resultDiv.textContent = result.message;
            resultDiv.style.display = 'block';

            // ·∫®n form v√† hi·ªÉn th·ªã n√∫t quay l·∫°i
            document.getElementById('test-form').style.display = 'none';
            document.getElementById('back-btn').style.display = 'block';
        });
    </script>
</body>
</html>
<?php $stmt->close(); $test_stmt->close(); $conn->close(); ?>
  ----- üîö H·∫øt file: admin\test_page.php -----

  - üìÅ uploads/
    - üìÑ 1.jpg
    - üìÑ 2.jpg
    - üìÑ B√°o C√°o B√†i T·∫≠p Nh√≥m 4.docx
    - üìÑ Solutions_Pre_Intermediate_Students_Book.pdf
    - üìÑ videoplayback.mp4
- üìÅ assets/
  - üìÅ img/
    - üìÑ background.jpg
    - üìÑ hero-bg.jpg
- üìÅ auth/
  - üìÑ login.php

  ----- üìÑ N·ªôi dung file: auth\login.php -----
<?php
session_start();
require_once '../config/config.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    try {
        $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);
        $password = $_POST['password'];

        $stmt = $conn->prepare("SELECT id, username, password, role FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        $user = $stmt->get_result()->fetch_assoc();

        if ($user && password_verify($password, $user['password'])) {
            $_SESSION['user_id'] = $user['id'];
            $_SESSION['username'] = $user['username'];
            $_SESSION['role'] = $user['role'];
            header("Location: " . ($user['role'] === 'admin' ? '../admin/admin.php' : '../admin/dashboard.php'));
            exit();
        } else {
            $error = "Sai email ho·∫∑c m·∫≠t kh·∫©u!";
        }
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}
?>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng nh·∫≠p</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <form method="POST" class="auth-form">
        <h2>ƒêƒÉng nh·∫≠p</h2>
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="M·∫≠t kh·∫©u" required>
        <button type="submit">ƒêƒÉng nh·∫≠p</button>
        <div class="register-link">Ch∆∞a c√≥ t√†i kho·∫£n? <a href="register.php">ƒêƒÉng k√Ω</a></div>
        <?php if (isset($error)): ?><p class="error"><?php echo $error; ?></p><?php endif; ?>
    </form>
</body>
</html>
  ----- üîö H·∫øt file: auth\login.php -----

  - üìÑ logout.php

  ----- üìÑ N·ªôi dung file: auth\logout.php -----
<?php
session_start();
session_destroy();
header("Location: ../index.html");
exit();
?>
  ----- üîö H·∫øt file: auth\logout.php -----

  - üìÑ register.php

  ----- üìÑ N·ªôi dung file: auth\register.php -----
<?php
require_once '../config/config.php';

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    try {
        $username = filter_var($_POST['username'], FILTER_SANITIZE_STRING);
        $email = filter_var($_POST['email'], FILTER_SANITIZE_EMAIL);
        $password = password_hash($_POST['password'], PASSWORD_DEFAULT);

        $stmt = $conn->prepare("SELECT id FROM users WHERE email = ?");
        $stmt->bind_param("s", $email);
        $stmt->execute();
        if ($stmt->get_result()->num_rows > 0) throw new Exception("Email ƒë√£ t·ªìn t·∫°i!");

        $stmt = $conn->prepare("INSERT INTO users (username, email, password, role) VALUES (?, ?, ?, 'user')");
        $stmt->bind_param("sss", $username, $email, $password);
        $stmt->execute() ? $success = "ƒêƒÉng k√Ω th√†nh c√¥ng! <a href='login.php'>ƒêƒÉng nh·∫≠p</a>" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ƒêƒÉng k√Ω</title>
    <link rel="stylesheet" href="../style.css">
</head>
<body>
    <form method="POST" class="auth-form">
        <h2>ƒêƒÉng k√Ω</h2>
        <input type="text" name="username" placeholder="T√™n ƒëƒÉng nh·∫≠p" required>
        <input type="email" name="email" placeholder="Email" required>
        <input type="password" name="password" placeholder="M·∫≠t kh·∫©u" required>
        <button type="submit">ƒêƒÉng k√Ω</button>
        <div class="register-link">ƒê√£ c√≥ t√†i kho·∫£n? <a href="login.php">ƒêƒÉng nh·∫≠p</a></div>
        <?php if (isset($success)): ?><p class="success"><?php echo $success; ?></p><?php endif; ?>
        <?php if (isset($error)): ?><p class="error"><?php echo $error; ?></p><?php endif; ?>
    </form>
</body>
</html>
  ----- üîö H·∫øt file: auth\register.php -----

  - üìÑ style.css

  ----- üìÑ N·ªôi dung file: auth\style.css -----
/* Auth Forms (Login & Register) */
.auth-form { 
    width: 400px; 
    max-width: 90%; 
    background: #fff; 
    padding: 30px; 
    border-radius: 15px; 
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
    margin: 0 auto; 
    position: absolute; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    background: linear-gradient(135deg, #ffffff, #f8f9fa); 
}
.auth-form h2 { 
    font-size: 28px; 
    font-weight: 600; 
    color: #2c3e50; 
    text-align: center; 
    margin-bottom: 20px; 
}
.auth-form input { 
    width: 100%; 
    padding: 12px 15px; 
    margin: 12px 0; 
    border: 2px solid #e0e0e0; 
    border-radius: 25px; 
    font-size: 16px; 
    background: #f9fbfd; 
    transition: border-color 0.3s ease; 
}
.auth-form input:focus { 
    border-color: #007bff; 
    outline: none; 
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.3); 
}
.auth-form button { 
    width: 100%; 
    padding: 12px; 
    background: linear-gradient(90deg, #007bff, #0056b3); 
    color: #fff; 
    border: none; 
    border-radius: 25px; 
    font-size: 16px; 
    font-weight: 600; 
    text-transform: uppercase; 
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3); 
}
.auth-form button:hover { 
    background: linear-gradient(90deg, #0056b3, #003d80); 
    transform: translateY(-3px); 
}
.register-link { 
    text-align: center; 
    margin-top: 15px; 
    font-size: 14px; 
    color: #7f8c8d; 
}
.register-link a { 
    color: #007bff; 
    text-decoration: none; 
    font-weight: 500; 
}
.register-link a:hover { 
    text-decoration: underline; 
    color: #0056b3; 
}
  ----- üîö H·∫øt file: auth\style.css -----

- üìÅ config/
  - üìÑ config.php

  ----- üìÑ N·ªôi dung file: config\config.php -----
<?php
$conn = new mysqli('localhost', 'root', '', 'toeicdb');

if ($conn->connect_error) {
    die("K·∫øt n·ªëi th·∫•t b·∫°i: " . $conn->connect_error);
}

$conn->set_charset("utf8mb4");
?>
  ----- üîö H·∫øt file: config\config.php -----

- üìÑ contact.php

----- üìÑ N·ªôi dung file: contact.php -----
<?php
session_start();
require_once 'config/config.php';

if (!isset($_SESSION['user_id'])) {
    header("Location: auth/login.php");
    exit();
}

if ($_SERVER["REQUEST_METHOD"] == "POST") {
    try {
        $message = filter_var($_POST['message'], FILTER_SANITIZE_STRING);
        $user_id = $_SESSION['user_id'];
        $username = $_SESSION['username'];

        $stmt = $conn->prepare("INSERT INTO contacts (user_id, username, message) VALUES (?, ?, ?)");
        $stmt->bind_param("iss", $user_id, $username, $message);
        $stmt->execute() ? $success = "Tin nh·∫Øn ƒë√£ ƒë∆∞·ª£c g·ª≠i!" : throw new Exception($conn->error);
        $stmt->close();
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Li√™n h·ªá</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #80deea);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex: 1;
        }
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .logo a {
            color: #fff;
            text-decoration: none;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #00bcd4;
        }
        .container {
            padding: 20px;
            max-width: 800px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h1 {
            text-align: center;
            color: #006064;
        }
        .auth-form {
            display: flex;
            flex-direction: column;
        }
        .auth-form textarea {
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            resize: vertical;
            min-height: 100px;
        }
        .auth-form button {
            width: 100%;
            padding: 12px;
            background: linear-gradient(90deg, #007bff, #0056b3);
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            text-transform: uppercase;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }
        .auth-form button:hover {
            background: linear-gradient(90deg, #0056b3, #003d80);
            transform: translateY(-3px);
        }
        .success {
            color: green;
            text-align: center;
            margin: 10px 0;
        }
        .error {
            color: red;
            text-align: center;
            margin: 10px 0;
        }
        footer {
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
        }
        footer a {
            color: #fff;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        footer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
            }
            nav {
                margin-top: 10px;
            }
            nav a {
                margin: 5px;
            }
            footer div {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo"><a href="admin/dashboard.php">English Learning</a></div>
        <nav>
            <a href="admin/dashboard.php">Trang ch·ªß</a>
            <a href="test/select_test.php">Thi th·ª≠</a>
            <a href="profile.php">H·ªì s∆°</a>
            <a href="contact.php">Li√™n h·ªá</a>
            <a href="auth/logout.php" style="color: #ff5252;">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <main>
        <div class="container">
            <h1>Li√™n h·ªá</h1>
            <?php if (isset($success)): ?><p class="success"><?php echo $success; ?></p><?php endif; ?>
            <?php if (isset($error)): ?><p class="error"><?php echo $error; ?></p><?php endif; ?>
            <form method="POST" class="auth-form">
                <textarea name="message" placeholder="Nh·∫≠p tin nh·∫Øn c·ªßa b·∫°n" required></textarea>
                <button type="submit">G·ª≠i</button>
            </form>
        </div>
    </main>

    <footer>
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-bottom: 20px;">
                <div>
                    <h3>English Learning</h3>
                    <p>H·ªçc ti·∫øng Anh d·ªÖ d√†ng v√† hi·ªáu qu·∫£!</p>
                </div>
                <div>
                    <h3>Li√™n k·∫øt</h3>
                    <a href="about.php">Gi·ªõi thi·ªáu</a>
                    <a href="contact.php">Li√™n h·ªá</a>
                    <a href="policy.php">Ch√≠nh s√°ch</a>
                </div>
                <div>
                    <h3>Li√™n h·ªá</h3>
                    <p>Email: support@englishlearning.com</p>
                    <p>Hotline: 0123 456 789</p>
                </div>
            </div>
            <p>¬© 2025 English Learning. All rights reserved.</p>
        </div>
    </footer>

    <script>
        const scrollTopBtn = document.createElement('button');
        scrollTopBtn.textContent = '‚Üë';
        scrollTopBtn.style.position = 'fixed';
        scrollTopBtn.style.bottom = '20px';
        scrollTopBtn.style.right = '20px';
        scrollTopBtn.style.background = '#0288d1';
        scrollTopBtn.style.color = '#fff';
        scrollTopBtn.style.padding = '10px';
        scrollTopBtn.style.border = 'none';
        scrollTopBtn.style.borderRadius = '50%';
        scrollTopBtn.style.cursor = 'pointer';
        scrollTopBtn.style.display = 'none';
        document.body.appendChild(scrollTopBtn);

        window.addEventListener('scroll', () => {
            scrollTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none';
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>

<?php $conn->close(); ?>
----- üîö H·∫øt file: contact.php -----

- üìÑ export-code.js

----- üìÑ N·ªôi dung file: export-code.js -----
const fs = require('fs');
const path = require('path');

// C·∫•u h√¨nh
const projectDir = path.resolve('C:/xampp/htdocs/web_english');
const outputFile = 'toan_bo_code_va_cay_thu_muc.txt';

// Ph·∫ßn m·ªü r·ªông c·∫ßn XU·∫§T CODE (ch·ªâ nh·ªØng lo·∫°i n√†y m·ªõi ƒë·ªçc n·ªôi dung file)
const allowedExtensionsForCode = ['.html', '.css', '.php', '.js'];

// Th∆∞ m·ª•c kh√¥ng c·∫ßn scan
const excludedFolders = ['node_modules', '.git', 'vendor', 'storage', 'build', 'dist'];

const output = fs.createWriteStream(outputFile, { encoding: 'utf-8' });

// H√†m ƒë·ªá quy duy·ªát th∆∞ m·ª•c v√† in c√¢y + m√£ ngu·ªìn ph√π h·ª£p
function exportTree(dir, depth = 0) {
  const indent = '  '.repeat(depth);
  let items = [];

  try {
    items = fs.readdirSync(dir, { withFileTypes: true });
  } catch (err) {
    output.write(`${indent}‚ùå Kh√¥ng th·ªÉ ƒë·ªçc th∆∞ m·ª•c: ${dir}\n`);
    return;
  }

  items.forEach((item) => {
    const fullPath = path.join(dir, item.name);
    const relativePath = path.relative(projectDir, fullPath);
    const ext = path.extname(item.name).toLowerCase();

    // N·∫øu l√† th∆∞ m·ª•c
    if (item.isDirectory()) {
      if (!excludedFolders.includes(item.name)) {
        output.write(`${indent}- üìÅ ${item.name}/\n`);
        exportTree(fullPath, depth + 1);
      }
    } else {
      // In ra t·∫•t c·∫£ c√°c file
      output.write(`${indent}- üìÑ ${item.name}\n`);

      // Ch·ªâ xu·∫•t code n·∫øu l√† file h·ª£p l·ªá
      if (allowedExtensionsForCode.includes(ext)) {
        try {
          const content = fs.readFileSync(fullPath, 'utf-8');
          output.write(`\n${indent}----- üìÑ N·ªôi dung file: ${relativePath} -----\n`);
          output.write(content + '\n');
          output.write(`${indent}----- üîö H·∫øt file: ${relativePath} -----\n\n`);
        } catch (err) {
          output.write(`${indent}‚ùå L·ªói ƒë·ªçc file: ${relativePath}\n`);
        }
      }
    }
  });
}

// B·∫Øt ƒë·∫ßu
output.write(`üì¶ C·∫•u tr√∫c th∆∞ m·ª•c & m√£ ngu·ªìn: ${projectDir}\n\n`);
exportTree(projectDir);
output.end(() => {
  console.log(`‚úÖ Xu·∫•t th√†nh c√¥ng ra file: ${outputFile}`);
});

----- üîö H·∫øt file: export-code.js -----

- üìÑ index.html

----- üìÑ N·ªôi dung file: index.html -----
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>English Learning</title>
    <link rel="stylesheet" href="style.css">
    <style>
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(-20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        body {
            background: linear-gradient(135deg, #e0f7fa, #80deea); /* Gradient n·ªÅn to√†n trang */
            margin: 0;
            font-family: Arial, sans-serif;
        }
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1); /* Gradient header */
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }
        header .logo {
            font-size: 24px;
            font-weight: bold;
        }
        header .auth a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }
        header .auth a:hover {
            color: #00bcd4;
        }
        .hero {
            background: linear-gradient(135deg, #0288d1, #4fc3f7); /* Gradient hero */
            color: #fff;
            text-align: center;
            padding: 100px 20px;
        }
        .hero h1 {
            font-size: 48px;
            animation: fadeIn 1s;
        }
        .hero p {
            font-size: 24px;
            margin: 20px 0;
        }
        .hero .btn {
            background: #3498db;
            color: #fff;
            padding: 10px 20px;
            text-decoration: none;
            border-radius: 5px;
            transition: opacity 0.3s;
        }
        .hero .btn:hover {
            opacity: 0.8;
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
            }
            header .auth {
                margin-top: 10px;
            }
            header .auth a {
                margin: 5px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo">English Learning</div>
        <div class="auth">
            <a href="auth/login.php">ƒêƒÉng nh·∫≠p</a>
            <a href="auth/register.php">ƒêƒÉng k√Ω</a>
            <a href="auth/login.php">Li√™n h·ªá</a>
        </div>
    </header>
    <section class="hero">
        <h1>Ch√†o m·ª´ng ƒë·∫øn v·ªõi English Learning</h1>
        <p>H·ªçc Ti·∫øng Anh t·ª´ c∆° b·∫£n ƒë·∫øn n√¢ng cao</p>
        <a href="auth/login.php" class="btn">B·∫Øt ƒë·∫ßu ngay</a>
    </section>
</body>
</html>
----- üîö H·∫øt file: index.html -----

- üìÑ profile.php

----- üìÑ N·ªôi dung file: profile.php -----
<?php
session_start();
// S·ª≠ d·ª•ng ƒë∆∞·ªùng d·∫´n t∆∞∆°ng ƒë·ªëi t·ª´ file profile.php
require_once 'config/config.php';

// B·∫≠t hi·ªÉn th·ªã l·ªói ƒë·ªÉ debug (ch·ªâ n√™n d√πng khi ph√°t tri·ªÉn)
ini_set('display_errors', 1);
ini_set('display_startup_errors', 1);
error_reporting(E_ALL);

// Ki·ªÉm tra xem ng∆∞·ªùi d√πng ƒë√£ ƒëƒÉng nh·∫≠p ch∆∞a
if (!isset($_SESSION['user_id'])) {
    header("Location: auth/login.php"); // ƒê∆∞·ªùng d·∫´n ƒë√∫ng t·ªõi trang login
    exit();
}

$user_id = $_SESSION['user_id'];
$username = $_SESSION['username']; // L·∫•y username t·ª´ session

// Bi·∫øn l∆∞u th√¥ng b√°o (ƒë·ªïi t√™n, ƒë·ªïi mk, l·ªói, th√†nh c√¥ng)
$message = ''; // D√πng chung cho c√°c lo·∫°i th√¥ng b√°o
$success_message = ''; // Ri√™ng cho th√†nh c√¥ng ƒë·ªÉ d·ªÖ style
$error_message = '';   // Ri√™ng cho l·ªói

// --- X·ª≠ l√Ω y√™u c·∫ßu c·∫≠p nh·∫≠t ---

// 1. C·∫≠p nh·∫≠t T√™n t√†i kho·∫£n
if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['update_username'])) {
    $new_username = trim($_POST['new_username']); // S·ª≠ d·ª•ng trim thay v√¨ filter deprecated

    if (empty($new_username)) {
        $error_message = "T√™n hi·ªÉn th·ªã kh√¥ng ƒë∆∞·ª£c ƒë·ªÉ tr·ªëng!";
    } elseif ($new_username === $username) {
        $message = "T√™n m·ªõi gi·ªëng t√™n hi·ªán t·∫°i."; // Th√¥ng b√°o th√¥ng tin
    } elseif (strlen($new_username) < 3 || strlen($new_username) > 100) {
         $error_message = "T√™n hi·ªÉn th·ªã ph·∫£i t·ª´ 3 ƒë·∫øn 100 k√Ω t·ª±.";
    } else {
        // C·∫≠p nh·∫≠t t√™n m·ªõi (ƒê√£ b·ªè ki·ªÉm tra tr√πng t√™n t√πy ch·ªçn)
        $sql_update_user = "UPDATE users SET username = ? WHERE id = ?";
        $stmt_update_user = $conn->prepare($sql_update_user);
        if ($stmt_update_user) {
            $stmt_update_user->bind_param("si", $new_username, $user_id);
            if ($stmt_update_user->execute()) {
                $_SESSION['username'] = $new_username; // C·∫≠p nh·∫≠t session
                $username = $new_username; // C·∫≠p nh·∫≠t bi·∫øn cho trang hi·ªán t·∫°i
                $success_message = "ƒê√£ c·∫≠p nh·∫≠t t√™n hi·ªÉn th·ªã th√†nh c√¥ng!";
            } else {
                $error_message = "L·ªói khi c·∫≠p nh·∫≠t t√™n.";
                error_log("L·ªói c·∫≠p nh·∫≠t username cho user ID $user_id: " . $stmt_update_user->error);
            }
            $stmt_update_user->close();
        } else {
            $error_message = "L·ªói h·ªá th·ªëng khi chu·∫©n b·ªã c·∫≠p nh·∫≠t t√™n.";
            error_log("L·ªói chu·∫©n b·ªã SQL c·∫≠p nh·∫≠t username: " . $conn->error);
        }
    }
}

// 2. C·∫≠p nh·∫≠t M·∫≠t kh·∫©u
if ($_SERVER['REQUEST_METHOD'] == 'POST' && isset($_POST['update_password'])) {
    $current_password = $_POST['current_password'];
    $new_password = $_POST['new_password'];

    if (empty($current_password) || empty($new_password)) {
        $error_message = "Vui l√≤ng nh·∫≠p ƒë·∫ßy ƒë·ªß m·∫≠t kh·∫©u hi·ªán t·∫°i v√† m·∫≠t kh·∫©u m·ªõi.";
    } elseif (strlen($new_password) < 6) { // S·ª≠a l·∫°i ki·ªÉm tra ƒë·ªô d√†i m·∫≠t kh·∫©u m·ªõi >= 6
         $error_message = "M·∫≠t kh·∫©u m·ªõi ph·∫£i c√≥ √≠t nh·∫•t 6 k√Ω t·ª±.";
    } else {
        // L·∫•y m·∫≠t kh·∫©u hi·ªán t·∫°i t·ª´ DB
        $stmt_pass = $conn->prepare("SELECT password FROM users WHERE id = ?");
        if ($stmt_pass) {
            $stmt_pass->bind_param("i", $user_id);
            $stmt_pass->execute();
            $result_pass = $stmt_pass->get_result();
            $user_pass_data = $result_pass->fetch_assoc();
            $stmt_pass->close();

            if ($user_pass_data && password_verify($current_password, $user_pass_data['password'])) {
                // M·∫≠t kh·∫©u hi·ªán t·∫°i ƒë√∫ng, ti·∫øn h√†nh c·∫≠p nh·∫≠t m·∫≠t kh·∫©u m·ªõi
                $hashed_password = password_hash($new_password, PASSWORD_DEFAULT);
                $stmt_update_pass = $conn->prepare("UPDATE users SET password = ? WHERE id = ?");
                if ($stmt_update_pass) {
                    $stmt_update_pass->bind_param("si", $hashed_password, $user_id);
                    if ($stmt_update_pass->execute()) {
                        $success_message = "C·∫≠p nh·∫≠t m·∫≠t kh·∫©u th√†nh c√¥ng!";
                    } else {
                        $error_message = "L·ªói khi c·∫≠p nh·∫≠t m·∫≠t kh·∫©u.";
                        error_log("L·ªói c·∫≠p nh·∫≠t password cho user ID $user_id: " . $stmt_update_pass->error);
                    }
                    $stmt_update_pass->close();
                } else {
                     $error_message = "L·ªói h·ªá th·ªëng khi chu·∫©n b·ªã c·∫≠p nh·∫≠t m·∫≠t kh·∫©u.";
                     error_log("L·ªói chu·∫©n b·ªã SQL c·∫≠p nh·∫≠t password: " . $conn->error);
                }
            } else {
                $error_message = "M·∫≠t kh·∫©u hi·ªán t·∫°i kh√¥ng ƒë√∫ng!";
            }
        } else {
            $error_message = "L·ªói h·ªá th·ªëng khi ki·ªÉm tra m·∫≠t kh·∫©u.";
            error_log("L·ªói chu·∫©n b·ªã SQL l·∫•y password: " . $conn->error);
        }
    }
}

// --- L·∫•y d·ªØ li·ªáu hi·ªÉn th·ªã ---

// 1. Th√¥ng tin c∆° b·∫£n c·ªßa ng∆∞·ªùi d√πng (Email, Ng√†y tham gia)
$sql_user = "SELECT email, created_at FROM users WHERE id = ?";
$stmt_user = $conn->prepare($sql_user);
$user_info = null;
if ($stmt_user) {
    $stmt_user->bind_param("i", $user_id);
    $stmt_user->execute();
    $result_user = $stmt_user->get_result();
    $user_info = $result_user->fetch_assoc();
    $stmt_user->close();
} else {
    error_log("L·ªói chu·∫©n b·ªã SQL l·∫•y th√¥ng tin user: " . $conn->error);
    $error_message .= " Kh√¥ng th·ªÉ t·∫£i th√¥ng tin t√†i kho·∫£n.";
}
if (!$user_info) { // X·ª≠ l√Ω n·∫øu kh√¥ng t√¨m th·∫•y user
    $user_info = ['email' => 'Kh√¥ng th·ªÉ t·∫£i', 'created_at' => date('Y-m-d H:i:s')];
}

// 2. L·ªãch s·ª≠ l√†m b√†i test sub_lesson
$sub_lesson_test_history = [];
$sql_sub_history = "SELECT sl.title AS lesson_title, sltr.score, sltr.total_questions, sltr.completed_at FROM sub_lesson_test_results sltr JOIN sub_lessons sl ON sltr.sub_lesson_id = sl.id WHERE sltr.user_id = ? ORDER BY sltr.completed_at DESC";
$stmt_sub_history = $conn->prepare($sql_sub_history);
if ($stmt_sub_history) {
    $stmt_sub_history->bind_param("i", $user_id);
    if ($stmt_sub_history->execute()) {
        $result_sub_history = $stmt_sub_history->get_result();
        while ($row = $result_sub_history->fetch_assoc()) { $sub_lesson_test_history[] = $row; }
    } else { error_log("L·ªói th·ª±c thi SQL l·∫•y l·ªãch s·ª≠ sub_lesson test: " . $stmt_sub_history->error); }
    $stmt_sub_history->close();
} else { error_log("L·ªói chu·∫©n b·ªã SQL l·∫•y l·ªãch s·ª≠ sub_lesson test: " . $conn->error); }

// 3. L·ªãch s·ª≠ l√†m b√†i test t·ªïng qu√°t (T·ª´ b·∫£ng test_results)
$general_test_history = [];
// L∆ØU √ù: C·ªôt `test_id` trong b·∫£ng `test_results` l√† VARCHAR. Kh√¥ng c√≥ b·∫£ng `tests` ƒë·ªÉ l·∫•y t√™n b√†i test.
// S·∫Ω hi·ªÉn th·ªã test_id tr·ª±c ti·∫øp. B·∫°n n√™n t·∫°o b·∫£ng `tests` v√† JOIN ƒë·ªÉ hi·ªÉn th·ªã t√™n d·ªÖ hi·ªÉu h∆°n.
$sql_general_history = "SELECT test_id, score, total_questions, completed_at FROM test_results WHERE user_id = ? ORDER BY completed_at DESC";
$stmt_general_history = $conn->prepare($sql_general_history);
if ($stmt_general_history) {
    $stmt_general_history->bind_param("i", $user_id);
    if ($stmt_general_history->execute()) {
        $result_general_history = $stmt_general_history->get_result();
        while ($row = $result_general_history->fetch_assoc()) { $general_test_history[] = $row; }
    } else { error_log("L·ªói th·ª±c thi SQL l·∫•y l·ªãch s·ª≠ general test: " . $stmt_general_history->error); }
    $stmt_general_history->close();
} else { error_log("L·ªói chu·∫©n b·ªã SQL l·∫•y l·ªãch s·ª≠ general test: " . $conn->error); }


// 4. L·ªãch s·ª≠ li√™n h·ªá/ph·∫£n h·ªìi
$contact_history = [];
$sql_contact = "SELECT message, status, reply, created_at, replied_at FROM contacts WHERE user_id = ? ORDER BY created_at DESC";
$stmt_contact = $conn->prepare($sql_contact);
if ($stmt_contact) {
    $stmt_contact->bind_param("i", $user_id);
    if ($stmt_contact->execute()) {
        $result_contact = $stmt_contact->get_result();
        while ($row = $result_contact->fetch_assoc()) { $contact_history[] = $row; }
    } else { error_log("L·ªói th·ª±c thi SQL l·∫•y l·ªãch s·ª≠ li√™n h·ªá: " . $stmt_contact->error); }
    $stmt_contact->close();
} else { error_log("L·ªói chu·∫©n b·ªã SQL l·∫•y l·ªãch s·ª≠ li√™n h·ªá: " . $conn->error); }

$conn->close(); // ƒê√≥ng k·∫øt n·ªëi DB *TR∆Ø·ªöC KHI* b·∫Øt ƒë·∫ßu HTML
?>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>H·ªì s∆° c√° nh√¢n - <?php echo htmlspecialchars($username, ENT_QUOTES, 'UTF-8'); ?></title>
    <link rel="stylesheet" href="assets/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <style>
        /* CSS c∆° b·∫£n - B·∫°n c√≥ th·ªÉ t√πy ch·ªânh ho·∫∑c ƒë∆∞a v√†o file CSS ri√™ng */
        body {
            font-family: Arial, sans-serif; /* Gi·ªëng code m·∫´u */
            background: linear-gradient(135deg, #e0f7fa, #b2ebf2); /* Gi·ªØ gradient n·ªÅn */
            color: #333;
            margin: 0;
            padding: 0;
            display: flex; /* S·ª≠ d·ª•ng flexbox cho layout ch√≠nh */
            flex-direction: column; /* X·∫øp c√°c ph·∫ßn t·ª≠ theo c·ªôt */
            min-height: 100vh; /* Chi·ªÅu cao t·ªëi thi·ªÉu l√† 100% viewport */
        }
        .container {
            padding: 25px;
            max-width: 850px; /* R·ªông h∆°n ch√∫t */
            margin: 30px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            flex-grow: 1; /* Cho ph√©p container ch√≠nh gi√£n n·ªü */
        }
        h1 {
            text-align: center;
            color: #006064; /* Gi·ªØ m√†u ti√™u ƒë·ªÅ */
            margin-bottom: 30px;
        }

        /* Th√¥ng b√°o */
        .message-container { padding: 15px; margin-bottom: 20px; border-radius: 5px; border: 1px solid transparent; }
        .success-message { background-color: #d4edda; color: #155724; border-color: #c3e6cb; }
        .error-message { background-color: #f8d7da; color: #721c24; border-color: #f5c6cb; }
        .info-message { background-color: #cce5ff; color: #004085; border-color: #b8daff; }

        /* Sections */
        .profile-section {
            margin-bottom: 35px;
            padding-bottom: 25px;
            border-bottom: 1px solid #eee; /* Ph√¢n c√°ch r√µ h∆°n */
        }
        .profile-section:last-child { border-bottom: none; margin-bottom: 0; }
        .profile-section h2 {
            color: #00796b; /* M√†u kh√°c cho sub-heading */
            font-size: 1.3em; /* To h∆°n ch√∫t */
            margin-bottom: 20px;
            padding-bottom: 5px;
            border-bottom: 2px solid #e0f2f1;
        }

        /* Th√¥ng tin t√†i kho·∫£n */
        .profile-info p { margin-bottom: 10px; line-height: 1.6; }
        .profile-info strong { display: inline-block; width: 120px; color: #555; font-weight: bold;}

        /* Form (auth-form style t·ª´ code m·∫´u) */
        .auth-form { display: flex; flex-direction: column; }
        .auth-form label { margin-bottom: 5px; font-weight: bold; color: #555; }
        .auth-form input[type="text"],
        .auth-form input[type="password"] {
            padding: 12px; /* TƒÉng padding */
            margin-bottom: 15px; /* Kho·∫£ng c√°ch l·ªõn h∆°n */
            border: 1px solid #ccc; /* R√µ h∆°n */
            border-radius: 4px;
            font-size: 1em;
        }
        .auth-form button {
            width: auto; /* Kh√¥ng full width */
            align-self: flex-start; /* CƒÉn tr√°i */
            padding: 10px 25px; /* Padding c√¢n ƒë·ªëi */
            background: linear-gradient(90deg, #007bff, #0056b3); /* Gradient button */
            color: #fff;
            border: none;
            border-radius: 25px; /* Bo tr√≤n */
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.2);
        }
        .auth-form button:hover {
            background: linear-gradient(90deg, #0056b3, #003d80);
            transform: translateY(-2px); /* Hi·ªáu ·ª©ng hover */
            box-shadow: 0 6px 12px rgba(0, 123, 255, 0.3);
        }

        /* B·∫£ng l·ªãch s·ª≠ */
        .history-table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        .history-table th, .history-table td { border: 1px solid #ddd; padding: 10px 12px; text-align: left; vertical-align: middle; }
        .history-table th { background-color: #e9ecef; color: #495057; font-weight: 600; white-space: nowrap; }
        .history-table tr:nth-child(even) { background-color: #f8f9fa; }
        .history-table tr:hover { background-color: #e2e6ea; }
        .history-table td .status { font-weight: bold; padding: 4px 8px; border-radius: 4px; font-size: 0.85em; text-transform: uppercase; color: white; }
        .history-table td .status.pending { background-color: #ffc107; color: #333; }
        .history-table td .status.replied { background-color: #28a745; }
        .history-table td .reply-content { background-color: #f1f3f5; padding: 8px; margin-top: 5px; border-left: 3px solid #007bff; font-style: italic; color: #495057; font-size: 0.95em; }
        .no-history { text-align: center; color: #6c757d; margin-top: 20px; padding: 15px; background-color: #f8f9fa; border: 1px dashed #ced4da; border-radius: 4px; }

        /* Link button */
        .link-button {
            display: inline-block;
            text-decoration: none;
            background-color: #28a745;
            color: white;
            padding: 10px 15px;
            border-radius: 4px;
            transition: background-color 0.3s ease;
            font-weight: 500;
        }
        .link-button:hover { background-color: #218838; }
        .center-button { text-align: center; margin-top: 20px; }

         /* Header & Footer Styles */
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            z-index: 1000;
            flex-shrink: 0; /* NgƒÉn header co l·∫°i */
        }
        header .logo {
             font-size: 24px;
             font-weight: bold;
        }
        header .logo a {
            color: #fff;
            text-decoration: none;
        }
        header nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s ease;
        }
        header nav a:hover {
            color: #e0f7fa;
        }
        header nav a[href="auth/logout.php"] { /* M√†u kh√°c cho logout */
            color: #ffdddd;
        }
         header nav a[href="auth/logout.php"]:hover {
            color: #ffffff;
         }
        footer {
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 20px;
            text-align: center;
            margin-top: 40px; /* ƒê·∫©y footer xu·ªëng */
            flex-shrink: 0; /* NgƒÉn footer co l·∫°i */
        }
        footer a { color: #fff; text-decoration: none; margin: 0 10px; }
        footer a:hover { text-decoration: underline; }
        footer .footer-content { /* S·ª≠ d·ª•ng class ƒë·ªÉ target div ch·ª©a n·ªôi dung footer */
            max-width: 850px; /* Gi·ªØ r·ªông t∆∞∆°ng ƒë·ªìng container ch√≠nh */
            margin: 0 auto;
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            margin-bottom: 15px;
            text-align: left;
        }
        footer .footer-section { /* Th√™m class cho t·ª´ng c·ªôt footer */
            flex: 1; /* Chia ƒë·ªÅu kh√¥ng gian */
            min-width: 150px; /* Chi·ªÅu r·ªông t·ªëi thi·ªÉu ƒë·ªÉ kh√¥ng b·ªã b√≥p m√©o */
            margin: 10px;
        }
         footer h3 { margin-bottom: 10px; font-size: 1.1em;}
         footer p { margin: 5px 0; font-size: 0.95em;}
         footer .social-icons a {
             color: #fff;
             font-size: 1.2em;
             margin-right: 10px;
         }

    </style>
</head>
<body>
    <header>
        <div class="logo"><a href="index.php">English Learning</a></div>
        <nav>
            <a href="./admin/dashboard.php">Trang ch·ªß</a>
            <a href="test/select_test.php">Thi th·ª≠</a>
            <a href="contact.php">Li√™n h·ªá</a>
            <?php if (isset($_SESSION['username'])): ?>
                <span style="color: #e0f7fa; margin-left: 15px; font-weight: bold;"><i class="fas fa-user-circle"></i> Xin ch√†o, <span id="header-username"><?php echo htmlspecialchars($_SESSION['username'], ENT_QUOTES, 'UTF-8'); ?></span>!</span>
            <?php endif; ?>
            <a href="auth/logout.php">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <div class="container">
        <h1>H·ªì s∆° c√° nh√¢n</h1>

        <?php if (!empty($success_message)): ?>
            <div class="message-container success-message"><?php echo $success_message; ?></div>
        <?php endif; ?>
        <?php if (!empty($error_message)): ?>
            <div class="message-container error-message"><?php echo $error_message; ?></div>
        <?php endif; ?>
        <?php if (!empty($message)): // Th√¥ng b√°o th√¥ng tin chung ?>
             <div class="message-container info-message"><?php echo $message; ?></div>
        <?php endif; ?>

        <div class="profile-section profile-info">
            <h2>Chi ti·∫øt t√†i kho·∫£n</h2>
            <p><strong>T√™n hi·ªÉn th·ªã:</strong> <span id="display-username"><?php echo htmlspecialchars($username, ENT_QUOTES, 'UTF-8'); ?></span></p>
            <p><strong>Email:</strong> <?php echo htmlspecialchars($user_info['email'] ?? 'N/A', ENT_QUOTES, 'UTF-8'); ?></p>
            <p><strong>Ng√†y tham gia:</strong> <?php echo isset($user_info['created_at']) ? date('d/m/Y H:i', strtotime($user_info['created_at'])) : 'N/A'; ?></p>
        </div>

        <div class="profile-section">
            <h2>ƒê·ªïi t√™n hi·ªÉn th·ªã</h2>
            <form method="POST" action="profile.php" class="auth-form">
                 <label for="new_username">T√™n hi·ªÉn th·ªã m·ªõi:</label>
                <input type="text" id="new_username" name="new_username" value="<?php echo htmlspecialchars($username, ENT_QUOTES, 'UTF-8'); ?>" required minlength="3" maxlength="100">
                <button type="submit" name="update_username">C·∫≠p nh·∫≠t t√™n</button>
            </form>
        </div>

         <div class="profile-section">
            <h2>ƒê·ªïi m·∫≠t kh·∫©u</h2>
            <form method="POST" action="profile.php" class="auth-form">
                 <label for="current_password">M·∫≠t kh·∫©u hi·ªán t·∫°i:</label>
                <input type="password" id="current_password" name="current_password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u hi·ªán t·∫°i" required>
                 <label for="new_password">M·∫≠t kh·∫©u m·ªõi:</label>
                <input type="password" id="new_password" name="new_password" placeholder="Nh·∫≠p m·∫≠t kh·∫©u m·ªõi (√≠t nh·∫•t 6 k√Ω t·ª±)" required minlength="6">
                <button type="submit" name="update_password">C·∫≠p nh·∫≠t m·∫≠t kh·∫©u</button>
            </form>
        </div>

        <div class="profile-section">
            <h2>L·ªãch s·ª≠ l√†m b√†i ki·ªÉm tra (B√†i h·ªçc nh·ªè)</h2>
            <?php if (!empty($sub_lesson_test_history)): ?>
                <div style="overflow-x:auto;">
                    <table class="history-table">
                         <thead>
                            <tr><th>T√™n b√†i h·ªçc</th><th>ƒêi·ªÉm s·ªë</th><th>T·ªïng s·ªë c√¢u</th><th>Ng√†y ho√†n th√†nh</th></tr>
                         </thead>
                         <tbody>
                            <?php foreach ($sub_lesson_test_history as $result): ?>
                                <tr>
                                    <td><?php echo htmlspecialchars($result['lesson_title'] ?? 'N/A', ENT_QUOTES, 'UTF-8'); ?></td>
                                    <td><?php echo htmlspecialchars($result['score'], ENT_QUOTES, 'UTF-8'); ?></td>
                                    <td><?php echo htmlspecialchars($result['total_questions'], ENT_QUOTES, 'UTF-8'); ?></td>
                                    <td><?php echo date('d/m/Y H:i', strtotime($result['completed_at'])); ?></td>
                                </tr>
                            <?php endforeach; ?>
                         </tbody>
                    </table>
                </div>
            <?php else: ?>
                <p class="no-history">Ch∆∞a c√≥ l·ªãch s·ª≠ l√†m b√†i ki·ªÉm tra t·ª´ c√°c b√†i h·ªçc nh·ªè.</p>
            <?php endif; ?>
        </div>

         <div class="profile-section">
            <h2>L·ªãch s·ª≠ l√†m b√†i ki·ªÉm tra (T·ªïng qu√°t)</h2>
            <?php if (!empty($general_test_history)): ?>
                 <div style="overflow-x:auto;">
                    <table class="history-table">
                         <thead>
                            <tr><th>M√£ b√†i thi</th><th>ƒêi·ªÉm s·ªë</th><th>T·ªïng s·ªë c√¢u</th><th>Ng√†y ho√†n th√†nh</th></tr>
                         </thead>
                         <tbody>
                            <?php foreach ($general_test_history as $result): ?>
                                <tr>
                                    <td><?php echo htmlspecialchars($result['test_id'] ?? 'N/A', ENT_QUOTES, 'UTF-8'); ?> <br><small><i>(N√™n t·∫°o b·∫£ng 'tests' ƒë·ªÉ hi·ªÉn th·ªã t√™n)</i></small></td>
                                    <td><?php echo htmlspecialchars($result['score'], ENT_QUOTES, 'UTF-8'); ?></td>
                                    <td><?php echo htmlspecialchars($result['total_questions'], ENT_QUOTES, 'UTF-8'); ?></td>
                                    <td><?php echo date('d/m/Y H:i', strtotime($result['completed_at'])); ?></td>
                                </tr>
                            <?php endforeach; ?>
                         </tbody>
                    </table>
                 </div>
            <?php else: ?>
                <p class="no-history">Ch∆∞a c√≥ l·ªãch s·ª≠ l√†m b√†i ki·ªÉm tra t·ªïng qu√°t.</p>
            <?php endif; ?>
        </div>


        <div class="profile-section">
            <h2>L·ªãch s·ª≠ li√™n h·ªá & Ph·∫£n h·ªìi</h2>
            <?php if (!empty($contact_history)): ?>
                 <div style="overflow-x:auto;">
                    <table class="history-table">
                         <thead>
                            <tr><th>N·ªôi dung g·ª≠i</th><th>Tr·∫°ng th√°i</th><th>Ng√†y g·ª≠i</th><th>Ph·∫£n h·ªìi</th><th>Ng√†y ph·∫£n h·ªìi</th></tr>
                         </thead>
                         <tbody>
                            <?php foreach ($contact_history as $contact): ?>
                                <tr>
                                     <td><?php echo nl2br(htmlspecialchars($contact['message'] ?? '', ENT_QUOTES, 'UTF-8')); ?></td>
                                     <td>
                                         <span class="status <?php echo htmlspecialchars($contact['status'] ?? 'pending', ENT_QUOTES, 'UTF-8'); ?>">
                                             <?php echo ($contact['status'] === 'replied') ? 'ƒê√£ ph·∫£n h·ªìi' : 'ƒêang ch·ªù'; ?>
                                         </span>
                                     </td>
                                     <td><?php echo isset($contact['created_at']) ? date('d/m/Y H:i', strtotime($contact['created_at'])) : 'N/A'; ?></td>
                                     <td>
                                         <?php if (!empty($contact['reply'])): ?>
                                             <div class="reply-content">
                                                 <?php echo nl2br(htmlspecialchars($contact['reply'], ENT_QUOTES, 'UTF-8')); ?>
                                             </div>
                                         <?php else: ?>
                                             <i>Ch∆∞a c√≥</i>
                                         <?php endif; ?>
                                     </td>
                                     <td><?php echo isset($contact['replied_at']) ? date('d/m/Y H:i', strtotime($contact['replied_at'])) : ''; ?></td>
                                </tr>
                            <?php endforeach; ?>
                         </tbody>
                    </table>
                 </div>
            <?php else: ?>
                <p class="no-history">Ch∆∞a c√≥ l·ªãch s·ª≠ li√™n h·ªá n√†o.</p>
            <?php endif; ?>
             <div class="center-button">
                 <a href="contact.php" class="link-button">G·ª≠i li√™n h·ªá m·ªõi</a>
             </div>
        </div>

    </div>

    <footer>
        <div class="footer-content">
             <div class="footer-section">
                 <h3>V·ªÅ ch√∫ng t√¥i</h3>
                 <p>·ª®ng d·ª•ng h·ªçc ti·∫øng Anh gi√∫p b·∫°n c·∫£i thi·ªán k·ªπ nƒÉng ng√¥n ng·ªØ qua c√°c b√†i h·ªçc v√† b√†i ki·ªÉm tra.</p>
             </div>
             <div class="footer-section">
                 <h3>Li√™n k·∫øt nhanh</h3>
                 <p><a href="index.php">Trang ch·ªß</a></p>
                 <p><a href="courses.php">Kh√≥a h·ªçc</a></p>
                 <p><a href="test/select_test.php">Thi th·ª≠</a></p>
                 <p><a href="contact.php">Li√™n h·ªá</a></p>
             </div>
             <div class="footer-section">
                 <h3>K·∫øt n·ªëi</h3>
                 <p>Email: support@yourapp.com</p>
                 <p>ƒêi·ªán tho·∫°i: (123) 456-7890</p>
                 <div class="social-icons">
                     <a href="#"><i class="fab fa-facebook"></i></a>
                     <a href="#"><i class="fab fa-twitter"></i></a>
                     <a href="#"><i class="fab fa-instagram"></i></a>
                 </div>
             </div>
        </div>
        <p>&copy; <?php echo date('Y'); ?> English Learning. All rights reserved.</p>
    </footer>


    <script>
         // C·∫≠p nh·∫≠t t√™n hi·ªÉn th·ªã tr√™n header n·∫øu th√†nh c√¥ng (M√£ n√†y ch·∫°y ngay khi script ƒë∆∞·ª£c t·∫£i)
         <?php if (strpos($success_message, 't√™n hi·ªÉn th·ªã') !== false): ?>
             // Gi·∫£ s·ª≠ header c√≥ span v·ªõi id="header-username"
             const headerUsernameSpan = document.getElementById('header-username');
             if (headerUsernameSpan) {
                 // S·ª≠ d·ª•ng json_encode ƒë·ªÉ nh√∫ng chu·ªói PHP v√†o JavaScript an to√†n
                 headerUsernameSpan.textContent = <?php echo json_encode($username); ?>;
             }
             // C·∫≠p nh·∫≠t ti√™u ƒë·ªÅ trang
              document.title = 'H·ªì s∆° c√° nh√¢n - ' + <?php echo json_encode($username); ?>;
              // C·∫≠p nh·∫≠t span ch√†o m·ª´ng trong trang
              const welcomeUsernameSpan = document.getElementById('display-username');
              if(welcomeUsernameSpan) {
                  // S·ª≠ d·ª•ng json_encode ƒë·ªÉ nh√∫ng chu·ªói PHP v√†o JavaScript an to√†n
                  welcomeUsernameSpan.textContent = <?php echo json_encode($username); ?>;
              }
         <?php endif; ?>

        // G√≥i m√£ x·ª≠ l√Ω DOM v√†o s·ª± ki·ªán DOMContentLoaded ƒë·ªÉ ƒë·∫£m b·∫£o trang ƒë√£ s·∫µn s√†ng
        document.addEventListener('DOMContentLoaded', () => {
            // N√∫t quay l·∫°i ƒë·∫ßu trang (Gi·ªØ nguy√™n t·ª´ code m·∫´u)
            const scrollTopBtn = document.createElement('button');
            scrollTopBtn.innerHTML = '&#8593;'; // M≈©i t√™n l√™n
            scrollTopBtn.style.position = 'fixed';
            scrollTopBtn.style.bottom = '30px'; // Cao h∆°n ch√∫t
            scrollTopBtn.style.right = '30px';
            scrollTopBtn.style.background = '#007bff'; // M√†u kh√°c
            scrollTopBtn.style.color = '#fff';
            scrollTopBtn.style.padding = '8px 12px'; // ƒêi·ªÅu ch·ªânh padding
            scrollTopBtn.style.border = 'none';
            scrollTopBtn.style.borderRadius = '50%';
            scrollTopBtn.style.cursor = 'pointer';
            scrollTopBtn.style.display = 'none'; // ·∫®n ban ƒë·∫ßu
            scrollTopBtn.style.fontSize = '18px';
            scrollTopBtn.style.zIndex = '999';
            scrollTopBtn.style.boxShadow = '0 2px 5px rgba(0,0,0,0.2)';

            // Ch·ªâ th√™m n√∫t v√†o body khi DOM ƒë√£ t·∫£i xong
            document.body.appendChild(scrollTopBtn);

            window.addEventListener('scroll', () => {
                scrollTopBtn.style.display = window.scrollY > 300 ? 'block' : 'none'; // Hi·ªán khi cu·ªôn xu·ªëng 300px
            });

            scrollTopBtn.addEventListener('click', () => {
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });

            console.log("Script DOMContentLoaded ƒë√£ ch·∫°y.");
        });

         console.log("Trang profile ƒë√£ t·∫£i xong (script tag processed).");
     </script>
</body>
</html>
----- üîö H·∫øt file: profile.php -----

- üìÑ README.md
- üìÅ searchbar/
  - üìÅ css/
    - üìÑ admin.css

    ----- üìÑ N·ªôi dung file: searchbar\css\admin.css -----
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 20px;
    background-color: #f4f4f4;
}

.login-container, .dashboard {
    max-width: 600px;
    margin: 0 auto;
    background: white;
    padding: 20px;
    border-radius: 5px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

.login-container h2, .dashboard h2 {
    text-align: center;
}

.login-container form {
    display: flex;
    flex-direction: column;
}

.login-container label {
    margin: 10px 0 5px;
}

.login-container input, .dashboard input, .dashboard select, .dashboard textarea {
    padding: 8px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 4px;
}

.login-container button, .dashboard button {
    padding: 10px;
    background-color: #007bff;
    color: white;
    border: none;
    border-radius: 4px;
    cursor: pointer;
}

.login-container button:hover, .dashboard button:hover {
    background-color: #0056b3;
}

table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
}

table, th, td {
    border: 1px solid #ddd;
}

th, td {
    padding: 10px;
    text-align: left;
}

th {
    background-color: #007bff;
    color: white;
}

tr:nth-child(even) {
    background-color: #f2f2f2;
}

.action-buttons a {
    margin-right: 10px;
    text-decoration: none;
    color: #007bff;
}

.action-buttons a:hover {
    text-decoration: underline;
}
    ----- üîö H·∫øt file: searchbar\css\admin.css -----

    - üìÑ style.css

    ----- üìÑ N·ªôi dung file: searchbar\css\style.css -----

.search-wrapper {
    position: fixed;
    z-index: 1000;
    left: 20px;
    top: 20px;
    user-select: none; /* NgƒÉn ch·ªçn vƒÉn b·∫£n khi k√©o */
}

.search-icon {
    background-color: #007bff;
    border-radius: 50%;
    width: 40px;
    height: 40px;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
    cursor: pointer;
}

.search-icon.hidden {
    display: none;
}

.search-bar {
    background-color: #fff;
    padding: 15px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    width: 280px;
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer; /* ƒê·ªïi th√†nh pointer ƒë·ªÉ r√µ r√†ng khi nh·∫•n */
}

.search-bar.hidden {
    display: none;
}

.search-bar input, .search-bar select, .search-bar button {
    width: 100%;
    padding: 8px;
    margin: 5px 0;
    border: 1px solid #ddd;
    border-radius: 5px;
    font-size: 14px;
    box-sizing: border-box;
}

.search-bar select {
    appearance: none;
    background: url('data:image/svg+xml;utf8,<svg fill="black" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M7 10l5 5 5-5z"/><path d="M0 0h24v24H0z" fill="none"/></svg>') no-repeat right 10px center;
}

.search-bar button {
    background-color: #007bff;
    color: white;
    border: none;
    cursor: pointer;
    transition: background-color 0.2s;
}

.search-bar button:hover {
    background-color: #0056b3;
}
.result {
    margin-top: 10px;
    background: #f9f9f9;
    padding: 10px;
    border-radius: 5px;
    width: 100%;
    max-height: 150px;
    overflow-y: auto;
    font-size: 14px;
    text-align: left;
}

.result h3 {
    margin: 0 0 5px;
    font-size: 16px;
    color: #333;
}

.result p {
    margin: 5px 0;
    color: #555;
}

.result button {
    padding: 5px 10px;
    margin: 5px 5px 0 0;
    font-size: 12px;
}

.modal {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    z-index: 1001;
}

.modal-content {
    background-color: white;
    margin: 15% auto;
    padding: 20px;
    width: 50%;
    max-width: 500px;
    border-radius: 10px;
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
    position: relative;
}

.close {
    position: absolute;
    top: 10px;
    right: 15px;
    font-size: 20px;
    cursor: pointer;
    color: #333;
}

.close:hover {
    color: #007bff;
}
    ----- üîö H·∫øt file: searchbar\css\style.css -----

  - üìÑ detail.php

  ----- üìÑ N·ªôi dung file: searchbar\detail.php -----
<?php
header('Content-Type: application/json');
include '../config/config.php';

$id = isset($_GET['id']) ? intval($_GET['id']) : 0;

$sql = "SELECT * FROM dictionary WHERE id = ?";
$stmt = $conn->prepare($sql);
$stmt->bind_param('i', $id);
$stmt->execute();
$result = $stmt->get_result();

if ($result->num_rows > 0) {
    echo json_encode($result->fetch_assoc());
} else {
    echo json_encode(['error' => 'Kh√¥ng t√¨m th·∫•y th√¥ng tin']);
}

$stmt->close();
$conn->close();
?>
  ----- üîö H·∫øt file: searchbar\detail.php -----

  - üìÅ includes/
    - üìÑ db_connect.php

    ----- üìÑ N·ªôi dung file: searchbar\includes\db_connect.php -----
<?php
session_start();
$host = 'localhost';
$username = 'root';
$password = '';
$dbname = 'dictionary_db';

$conn = new mysqli($host, $username, $password, $dbname);

if ($conn->connect_error) {
    die("Connection failed: " . $conn->connect_error);
}
$conn->set_charset("utf8");
?>
    ----- üîö H·∫øt file: searchbar\includes\db_connect.php -----

  - üìÑ index.php

  ----- üìÑ N·ªôi dung file: searchbar\index.php -----
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra c·ª©u t·ª´ ƒëi·ªÉn Anh-Vi·ªát</title>
    <link rel="stylesheet" href="../searchbar/css/style.css">
</head>
<body>
    <!-- Kh·ªëi ch·ª©a bi·ªÉu t∆∞·ª£ng v√† b·∫£ng tra -->
    <div id="search-wrapper" class="search-wrapper">
        <!-- Bi·ªÉu t∆∞·ª£ng t√¨m ki·∫øm -->
        <div id="search-icon" class="search-icon">
            <svg width="30" height="30" viewBox="0 0 24 24" fill="none" stroke="#fff" stroke-width="2">
                <circle cx="11" cy="11" r="8"></circle>
                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
            </svg>
        </div>
        <!-- B·∫£ng tra -->
        <div id="search-bar" class="search-bar hidden">
            <input type="text" id="search-input" placeholder="Nh·∫≠p t·ª´ c·∫ßn tra...">
            <select id="language">
                <option value="en">Anh ‚Üí Vi·ªát</option>
                <option value="vi">Vi·ªát ‚Üí Anh</option>
            </select>
            <button onclick="searchWord()">Tra c·ª©u</button>
            <!-- K·∫øt qu·∫£ t√¨m ki·∫øm -->
            <div id="result" class="result"></div>
        </div>
    </div>

    <!-- B·∫£ng chi ti·∫øt -->
    <div id="detail-modal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">√ó</span>
            <div id="detail-content"></div>
        </div>
    </div>

    <script src="../searchbar/js/script.js"></script>
</body>
</html>
  ----- üîö H·∫øt file: searchbar\index.php -----

  - üìÅ js/
    - üìÑ script.js

    ----- üìÑ N·ªôi dung file: searchbar\js\script.js -----
// Ki·ªÉm tra xem searchWrapper ƒë√£ ƒë∆∞·ª£c khai b√°o ch∆∞a
if (typeof searchWrapper === 'undefined') {
    let searchWrapper = document.getElementById('search-wrapper');
    let isDragging = false;
    let currentX, currentY, initialX, initialY;

    // H√†m k√©o th·∫£
    function startDragging(e) {
        // Ch·ªâ k√©o khi nh·∫•n v√†o search-icon ho·∫∑c khu v·ª±c tr·ªëng c·ªßa search-bar
        if (e.target.closest('#search-input') || e.target.closest('select') || e.target.closest('button')) return;
        initialX = e.clientX - currentX;
        initialY = e.clientY - currentY;
        isDragging = true;
        e.preventDefault(); // NgƒÉn h√†nh vi m·∫∑c ƒë·ªãnh
    }

    function drag(e) {
        if (isDragging) {
            e.preventDefault();
            currentX = e.clientX - initialX;
            currentY = e.clientY - initialY;
            searchWrapper.style.left = currentX + 'px';
            searchWrapper.style.top = currentY + 'px';
        }
    }

    function stopDragging() {
        isDragging = false;
    }

    // G·∫Øn s·ª± ki·ªán k√©o th·∫£
    searchWrapper.addEventListener('mousedown', startDragging);
    document.addEventListener('mousemove', drag);
    document.addEventListener('mouseup', stopDragging);

    // L∆∞u v·ªã tr√≠ v√† tr·∫°ng th√°i ·∫©n/hi·ªán
    window.addEventListener('beforeunload', () => {
        localStorage.setItem('searchPos', JSON.stringify({
            x: searchWrapper.style.left,
            y: searchWrapper.style.top
        }));
        localStorage.setItem('searchBarHidden', document.getElementById('search-bar').classList.contains('hidden'));
    });

    // Kh√¥i ph·ª•c v·ªã tr√≠ v√† tr·∫°ng th√°i
    window.addEventListener('load', () => {
        let pos = localStorage.getItem('searchPos');
        if (pos) {
            pos = JSON.parse(pos);
            searchWrapper.style.left = pos.x;
            searchWrapper.style.top = pos.y;
        } else {
            searchWrapper.style.left = '20px';
            searchWrapper.style.top = '20px';
        }
        currentX = parseInt(searchWrapper.style.left) || 20;
        currentY = parseInt(searchWrapper.style.top) || 20;

        let isBarHidden = localStorage.getItem('searchBarHidden') === 'true';
        let searchBar = document.getElementById('search-bar');
        let searchIcon = document.getElementById('search-icon');
        searchBar.classList.toggle('hidden', isBarHidden);
        searchIcon.classList.toggle('hidden', !isBarHidden);
    });

    // Nh·∫•n b·∫£ng tra ƒë·ªÉ thu g·ªçn th√†nh bi·ªÉu t∆∞·ª£ng
    document.getElementById('search-bar').addEventListener('click', (e) => {
        if (!e.target.closest('#search-input') && !e.target.closest('select') && !e.target.closest('button') && !e.target.closest('.result')) {
            let searchBar = document.getElementById('search-bar');
            let searchIcon = document.getElementById('search-icon');
            searchBar.classList.add('hidden');
            searchIcon.classList.remove('hidden');
        }
    });

    // Nh·∫•n bi·ªÉu t∆∞·ª£ng ƒë·ªÉ hi·ªán b·∫£ng tra
    document.getElementById('search-icon').addEventListener('click', () => {
        let searchBar = document.getElementById('search-bar');
        let searchIcon = document.getElementById('search-icon');
        searchBar.classList.remove('hidden');
        searchIcon.classList.add('hidden');
    });
}

// T√¨m ki·∫øm t·ª´
function searchWord() {
    let word = document.getElementById('search-input').value.trim();
    let language = document.getElementById('language').value;

    if (!word) {
        alert('Vui l√≤ng nh·∫≠p t·ª´ c·∫ßn tra!');
        return;
    }

    fetch(`../searchbar/search.php?word=${encodeURIComponent(word)}&lang=${language}`)
        .then(response => response.json())
        .then(data => {
            let resultDiv = document.getElementById('result');
            if (data.error) {
                resultDiv.innerHTML = `<p>${data.error}</p>`;
            } else {
                resultDiv.innerHTML = `
                    <h3>${data.word}</h3>
                    <p><strong>Nghƒ©a:</strong> ${data.translation}</p>
                    <p><strong>Lo·∫°i t·ª´:</strong> ${data.word_type || 'Kh√¥ng c√≥'}</p>
                    <button onclick="speak('${data.word}')">Nghe</button>
                    <button onclick="showDetail(${data.id})">Xem chi ti·∫øt</button>
                `;
            }
        })
        .catch(error => console.error('Error:', error));
}

// ƒê·ªçc t·ª´
function speak(text) {
    let utterance = new SpeechSynthesisUtterance(text);
    utterance.lang = document.getElementById('language').value === 'en' ? 'en-US' : 'vi-VN';
    speechSynthesis.speak(utterance);
}

// Hi·ªÉn th·ªã chi ti·∫øt
function showDetail(id) {
    fetch(`../searchbar/detail.php?id=${id}`)
        .then(response => response.json())
        .then(data => {
            let modal = document.getElementById('detail-modal');
            let content = document.getElementById('detail-content');
            content.innerHTML = `
                <h2>${data.word}</h2>
                <p><strong>Phi√™n √¢m:</strong> ${data.pronunciation || 'Kh√¥ng c√≥'}</p>
                <p><strong>Nghƒ©a:</strong> ${data.translation}</p>
                <p><strong>Lo·∫°i t·ª´:</strong> ${data.word_type || 'Kh√¥ng c√≥'}</p>
                <p><strong>Gi·∫£i th√≠ch:</strong> ${data.detailed_explanation || 'Kh√¥ng c√≥'}</p>
                <p><strong>V√≠ d·ª•:</strong> ${data.example || 'Kh√¥ng c√≥'}</p>
            `;
            modal.style.display = 'block';
        })
        .catch(error => console.error('Error:', error));
}

// ƒê√≥ng modal
function closeModal() {
    document.getElementById('detail-modal').style.display = 'none';
}
    ----- üîö H·∫øt file: searchbar\js\script.js -----

  - üìÑ search.php

  ----- üìÑ N·ªôi dung file: searchbar\search.php -----
<?php
header('Content-Type: application/json');
include '../config/config.php';

$word = isset($_GET['word']) ? trim($_GET['word']) : '';
$language = isset($_GET['lang']) ? $_GET['lang'] : 'en';

if (empty($word)) {
    echo json_encode(['error' => 'Vui l√≤ng nh·∫≠p t·ª´ c·∫ßn tra']);
    exit;
}

$sql = "SELECT * FROM dictionary WHERE word = ? AND language = ?";
$stmt = $conn->prepare($sql);
$stmt->bind_param('ss', $word, $language);
$stmt->execute();
$result = $stmt->get_result();

if ($result->num_rows > 0) {
    echo json_encode($result->fetch_assoc());
} else {
    echo json_encode(['error' => 'Kh√¥ng t√¨m th·∫•y t·ª´']);
}

$stmt->close();
$conn->close();
?>
  ----- üîö H·∫øt file: searchbar\search.php -----

- üìÑ style.css

----- üìÑ N·ªôi dung file: style.css -----
/* Reset */
* { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', Arial, sans-serif; }
body {
    margin: 0;
    font-family: 'Segoe UI', Arial, sans-serif;
    background: #f4f4f4;
    color: #2c3e50;
    line-height: 1.6;
}
/* Common */
button, a { cursor: pointer; transition: all 0.3s ease; }
button:hover, a:hover { transform: translateY(-2px); }
table { width: 100%; border-collapse: collapse; }
th, td { padding: 12px; border: 1px solid #e0e0e0; text-align: left; }
.success { color: #28a745; text-align: center; padding: 10px; }
.error { color: #dc3545; text-align: center; padding: 10px; }

/* Header */
/* --- Header --- */
header {
    background: linear-gradient(90deg, #007bff, #0056b3);
    color: #fff;
    padding: 20px 5%;
    display: flex;
    justify-content: space-between;
    align-items: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    position: sticky;
    top: 0;
    z-index: 1000;
}

.logo {
    font-size: 28px;
    font-weight: bold;
    text-transform: uppercase;
}

.auth a {
    color: #fff;
    text-decoration: none;
    margin-left: 20px;
    font-weight: 500;
    position: relative;
}

.auth a::after {
    content: '';
    display: block;
    width: 0;
    height: 2px;
    background: #ffcc00;
    transition: width 0.3s ease;
    position: absolute;
    bottom: -4px;
    left: 0;
}

.auth a:hover::after {
    width: 100%;
}

/* --- Hero Section --- */
.hero {
    text-align: center;
    padding: 80px 10%;
    background: linear-gradient(135deg, #0056b3, #007bff);
    color: #fff;
}

.hero h1 {
    font-size: 42px;
    font-weight: 700;
    text-transform: uppercase;
    margin-bottom: 20px;
}

.hero p {
    font-size: 20px;
    font-style: italic;
    margin-bottom: 30px;
}

.btn {
    display: inline-block;
    background: #ffcc00;
    color: #2c3e50;
    padding: 12px 30px;
    border-radius: 25px;
    text-decoration: none;
    font-weight: 600;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    transition: background 0.3s ease, transform 0.3s ease;
}

.btn:hover {
    background: #ffe066;
    transform: scale(1.05);
}
header h1 { 
    font-size: 28px; 
    font-weight: 700; 
    letter-spacing: 1px; 
    text-transform: uppercase; 
}
header h1 #testTitle { 
    font-size: 24px; 
    font-weight: 500; 
    color: #ffcc00; 
}
.audio-player { 
    flex: 1; 
    margin: 0 20px; 
    text-align: center; 
}
.audio-player audio { 
    width: 100%; 
    max-width: 400px; 
    border-radius: 8px; 
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15); 
    background: #fff; 
}
#exitBtn { 
    background: linear-gradient(90deg, #e74c3c, #c0392b); 
    color: #fff; 
    border: none; 
    padding: 10px 25px; 
    border-radius: 25px; 
    font-weight: 600; 
    text-transform: uppercase; 
    box-shadow: 0 4px 10px rgba(231, 76, 60, 0.3); 
}
#exitBtn:hover { 
    background: linear-gradient(90deg, #c0392b, #a93226); 
    transform: translateY(-3px); 
}

/* Hero */
.hero { text-align: center; padding: 60px 10%; background: linear-gradient(135deg, #0056b3, #007bff); color: #fff; }
.hero h1 { font-size: 36px; font-weight: 700; margin-bottom: 20px; text-transform: uppercase; }
.hero p { font-size: 18px; margin: 15px 0; font-style: italic; }
.btn { display: inline-block; background: #ffcc00; padding: 12px 25px; color: #2c3e50; font-weight: 600; border-radius: 25px; text-decoration: none; box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2); }
.btn:hover { background: #e2e6ea; transform: scale(1.05); }

/* Courses */
.courses { padding: 50px 10%; background: #fff; }
.courses h2 { text-align: center; margin-bottom: 30px; font-size: 28px; font-weight: 600; color: #34495e; }
.course-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 25px; }
.course { background: #f8f9fa; padding: 20px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05); text-align: center; transition: transform 0.3s ease; }
.course:hover { transform: translateY(-5px); }
.course h3 { color: #007bff; margin-bottom: 15px; font-size: 20px; }
.course a { background: #007bff; color: #fff; padding: 10px 20px; border-radius: 25px; text-decoration: none; font-weight: 500; }
.course a:hover { background: #0056b3; }

/* Footer */
footer { text-align: center; padding: 15px; background: #2c3e50; color: #fff; font-size: 14px; }

/* Auth Forms (Login & Register) */
.auth-form { 
    width: 400px; 
    max-width: 90%; 
    background: #fff; 
    padding: 30px; 
    border-radius: 15px; 
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1); 
    margin: 0 auto; 
    position: absolute; 
    top: 50%; 
    left: 50%; 
    transform: translate(-50%, -50%); 
    background: linear-gradient(135deg, #ffffff, #f8f9fa); 
}
.auth-form h2 { 
    font-size: 28px; 
    font-weight: 600; 
    color: #2c3e50; 
    text-align: center; 
    margin-bottom: 20px; 
}
.auth-form input { 
    width: 100%; 
    padding: 12px 15px; 
    margin: 12px 0; 
    border: 2px solid #e0e0e0; 
    border-radius: 25px; 
    font-size: 16px; 
    background: #f9fbfd; 
    transition: border-color 0.3s ease; 
}
.auth-form input:focus { 
    border-color: #007bff; 
    outline: none; 
    box-shadow: 0 0 5px rgba(0, 123, 255, 0.3); 
}
.auth-form button { 
    width: 100%; 
    padding: 12px; 
    background: linear-gradient(90deg, #007bff, #0056b3); 
    color: #fff; 
    border: none; 
    border-radius: 25px; 
    font-size: 16px; 
    font-weight: 600; 
    text-transform: uppercase; 
    box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3); 
}
.auth-form button:hover { 
    background: linear-gradient(90deg, #0056b3, #003d80); 
    transform: translateY(-3px); 
}
.register-link { 
    text-align: center; 
    margin-top: 15px; 
    font-size: 14px; 
    color: #7f8c8d; 
}
.register-link a { 
    color: #007bff; 
    text-decoration: none; 
    font-weight: 500; 
}
.register-link a:hover { 
    text-decoration: underline; 
    color: #0056b3; 
}

/* Admin */
.container { 
    display: flex; 
    min-height: 100vh; 
    background: #f0f2f5; 
}
.sidebar { 
    width: 280px; 
    background: linear-gradient(180deg, #2c3e50, #1a252f); 
    padding: 30px 20px; 
    color: #fff; 
    position: fixed; 
    height: 100%; 
    box-shadow: 2px 0 10px rgba(0, 0, 0, 0.2); 
}
.sidebar h2 { 
    font-size: 24px; 
    font-weight: 700; 
    margin-bottom: 40px; 
    text-align: center; 
    color: #ecf0f1; 
    text-transform: uppercase; 
    letter-spacing: 1px; 
}
.sidebar ul { 
    list-style: none; 
}
.sidebar li { 
    padding: 15px 20px; 
    margin: 10px 0; 
    border-radius: 8px; 
    font-size: 16px; 
    font-weight: 500; 
}
.sidebar li:hover { 
    background: #34495e; 
}
.sidebar li.active { 
    background: #3498db; 
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.5); 
}
.sidebar a { 
    color: #fff; 
    text-decoration: none; 
    display: block; 
}
.main-content { 
    flex: 1; 
    padding: 40px; 
    margin-left: 280px; 
    background: #f0f2f5; 
}
.content-section { 
    display: none; 
    background: #fff; 
    padding: 30px; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
}
.content-section.active { 
    display: block; 
}
h1 { 
    font-size: 32px; 
    font-weight: 700; 
    color: #2c3e50; 
    margin-bottom: 25px; 
    text-align: center; 
}
h2 { 
    font-size: 24px; 
    font-weight: 600; 
    color: #34495e; 
    margin: 20px 0 15px; 
}
.admin-form { 
    display: grid; 
    gap: 15px; 
    max-width: 600px; 
    margin: 0 auto 30px; 
}
.admin-form input, 
.admin-form textarea { 
    width: 100%; 
    padding: 12px 15px; 
    border: 2px solid #e0e0e0; 
    border-radius: 8px; 
    font-size: 16px; 
    background: #f9fbfd; 
    transition: border-color 0.3s ease; 
}
.admin-form input:focus, 
.admin-form textarea:focus { 
    border-color: #3498db; 
    outline: none; 
}
.admin-form textarea { 
    min-height: 100px; 
}
.admin-form button { 
    background: linear-gradient(90deg, #28a745, #218838); 
    color: #fff; 
    border: none; 
    padding: 12px; 
    border-radius: 8px; 
    font-weight: 600; 
    text-transform: uppercase; 
}
.admin-form button:hover { 
    background: linear-gradient(90deg, #218838, #1e7e34); 
    transform: translateY(-3px); 
}
th { 
    background: #f5f5f5; 
    font-weight: 600; 
    color: #34495e; 
}
.delete-btn { 
    color: #dc3545; 
    font-weight: 600; 
    text-decoration: none; 
    padding: 5px 10px; 
    border-radius: 5px; 
}
.delete-btn:hover { 
    background: #dc3545; 
    color: #fff; 
}
.chart-container { 
    width: 70%; 
    max-width: 800px; 
    margin: 30px auto; 
    padding: 20px; 
    background: #fff; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
}
img { 
    max-width: 100px; 
    border-radius: 8px; 
}

/* Course Detail */
.course-image { 
    max-width: 100%; 
    height: auto; 
    margin: 20px auto; 
    border-radius: 10px; 
    display: block; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
}
.course-content { 
    margin-top: 25px; 
    padding: 20px; 
    background: #f9fbfd; 
    border-radius: 10px; 
}
.video-container { 
    text-align: center; 
    margin-top: 30px; 
}
video { 
    width: 100%; 
    max-width: 600px; 
    border-radius: 10px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
}
.download-links { 
    text-align: center; 
    margin-top: 25px; 
}
.download-links a { 
    background: #28a745; 
    color: #fff; 
    padding: 12px 20px; 
    border-radius: 25px; 
    text-decoration: none; 
    font-weight: 500; 
}
.download-links a:hover { 
    background: #218838; 
}
.back-btn { 
    display: block; 
    width: 200px; 
    margin: 30px auto; 
    text-align: center; 
    background: #dc3545; 
    color: #fff; 
    padding: 12px; 
    border-radius: 25px; 
    text-decoration: none; 
    font-weight: 600; 
}
.back-btn:hover { 
    background: #c82333; 
}

/* TOEIC Test */
.container { 
    display: flex; 
    flex-wrap: wrap; 
    max-width: 1400px; 
    margin: 20px auto; 
    gap: 20px; 
    padding: 0 20px; 
}
.part-navigation { 
    width: 20%; 
    min-width: 200px; 
    padding: 20px; 
    background 

: #fff; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
    position: sticky; 
    top: 90px; 
    height: fit-content; 
    max-height: calc(100vh - 100px); 
    overflow-y: auto; 
}
.part-btn { 
    width: 100%; 
    padding: 15px; 
    margin: 8px 0; 
    background: #ecf0f1; 
    color: #2c3e50; 
    border: none; 
    border-radius: 10px; 
    font-size: 16px; 
    font-weight: 600; 
    text-align: left; 
    transition: background 0.3s ease, color 0.3s ease; 
}
.part-btn:hover { 
    background: #bdc3c7; 
}
.part-btn.active { 
    background: linear-gradient(90deg, #3498db, #2980b9); 
    color: #fff; 
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3); 
}
.question-section { 
    width: 55%; 
    min-width: 500px; 
    padding: 30px; 
    background: #fff; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
    min-height: 600px; 
}
.question { 
    margin-bottom: 25px; 
    padding: 20px; 
    background: #f9fbfd; 
    border-radius: 10px; 
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.03); 
}
.question p { 
    font-size: 18px; 
    font-weight: 600; 
    color: #34495e; 
    margin-bottom: 15px; 
}
.question img { 
    max-width: 100%; 
    width: 400px; 
    height: auto; 
    display: block; 
    margin: 15px auto; 
    border-radius: 10px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1); 
}
.option { 
    margin: 10px 0; 
    display: flex; 
    align-items: center; 
}
.option input[type="radio"] { 
    margin-right: 12px; 
    accent-color: #3498db; 
    width: 18px; 
    height: 18px; 
}
.option label { 
    font-size: 16px; 
    color: #2c3e50; 
}
.sidebar { 
    width: 20%; 
    min-width: 200px; 
    padding: 20px; 
    background: #fff; 
    border-radius: 15px; 
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.05); 
    position: sticky; 
    top: 90px; 
    height: fit-content; 
    max-height: calc(100vh - 100px); 
    overflow-y: auto; 
}
.timer { 
    padding: 15px; 
    background: #ecf0f1; 
    color: #2c3e50; 
    border-radius: 10px; 
    font-size: 16px; 
    font-weight: 600; 
    text-align: center; 
    margin-bottom: 15px; 
    transition: background 0.3s ease, color 0.3s ease; 
}
#timeDisplay { 
    font-size: 28px; 
    font-weight: 700; 
    color: #c0392b; 
    display: block; 
    margin-top: 10px; 
}
.question-list-title { 
    font-size: 16px; 
    font-weight: 600; 
    color: #2c3e50; 
    margin-bottom: 15px; 
    padding-bottom: 5px; 
    border-bottom: 2px solid #ecf0f1; 
}
.question-list { 
    display: grid; 
    grid-template-columns: repeat(auto-fill, minmax(45px, 1fr)); 
    gap: 10px; 
    max-height: 350px; 
    overflow-y: auto; 
    padding: 10px 0; 
}
.question-list button { 
    width: 100%; 
    padding: 15px; 
    background: #ecf0f1; 
    color: #2c3e50; 
    border: none; 
    border-radius: 10px; 
    font-size: 16px; 
    font-weight: 600; 
    text-align: center; 
    transition: background 0.3s ease, color 0.3s ease; 
}
.question-list button:hover { 
    background: #bdc3c7; 
}
.question-list button.active { 
    background: linear-gradient(90deg, #3498db, #2980b9); 
    color: #fff; 
    box-shadow: 0 2px 5px rgba(52, 152, 219, 0.3); 
}
#submitBtn { 
    width: 100%; 
    padding: 15px; 
    background: linear-gradient(90deg, #2ecc71, #27ae60); 
    color: #fff; 
    border: none; 
    border-radius: 10px; 
    font-size: 16px; 
    font-weight: 600; 
    text-transform: uppercase; 
    margin-top: 25px; 
    box-shadow: 0 4px 10px rgba(46, 204, 113, 0.3); 
}
#submitBtn:hover { 
    background: linear-gradient(90deg, #27ae60, #219653); 
    transform: translateY(-3px); 
}
#scoreDisplay { 
    margin-top: 20px; 
    text-align: center; 
    font-size: 18px; 
    font-weight: 600; 
    color: #34495e; 
}
.scroll-top-btn { 
    position: fixed; 
    bottom: 30px; 
    right: 30px; 
    padding: 12px 25px; 
    background: linear-gradient(90deg, #3498db, #2980b9); 
    color: #fff; 
    border: none; 
    border-radius: 25px; 
    font-weight: 600; 
    box-shadow: 0 4px 10px rgba(52, 152, 219, 0.3); 
    display: none; 
}
.scroll-top-btn:hover { 
    background: linear-gradient(90deg, #2980b9, #2471a3); 
    transform: translateY(-3px); 
}
/* Select Test */
.select-test-container { 
    max-width: 1200px; 
    margin: 30px auto; 
    padding: 20px; 
    background: #fff; 
    border-radius: 10px; 
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.05); 
}
.refresh-btn { 
    margin: 0 auto 20px; 
    padding: 8px 16px; 
    background: #3498db; 
    color: #fff; 
    border: none; 
    border-radius: 5px; 
    display: block; 
}
.refresh-btn:hover { 
    background: #2980b9; 
}
.test-grid { 
    display: grid; 
    grid-template-columns: repeat(4, 1fr); 
    gap: 20px; 
}
.test-card { 
    background: #fff; 
    border: 1px solid #e0e0e0; 
    border-radius: 8px; 
    padding: 15px; 
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); 
}
.test-card h3 { 
    font-size: 18px; 
    font-weight: 600; 
    color: #2c3e50; 
    margin-bottom: 10px; 
}
.test-info { 
    display: flex; 
    flex-wrap: wrap; 
    gap: 10px; 
    margin-bottom: 10px; 
    font-size: 14px; 
    color: #7f8c8d; 
}
.action-btn { 
    width: 100%; 
    padding: 8px; 
    background: #3498db; 
    color: #fff; 
    border: none; 
    border-radius: 5px; 
}
.action-btn:hover { 
    background: #2980b9; 
}
textarea {
    width: 100%;
    padding: 12px 15px;
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    font-size: 16px;
    background: #f9fbfd;
    transition: border-color 0.3s ease;
    min-height: 100px;
    resize: vertical;
}
textarea:focus {
    border-color: #007bff;
    outline: none;
}


----- üîö H·∫øt file: style.css -----

- üìÅ test/
  - üìÑ admin.php

  ----- üìÑ N·ªôi dung file: test\admin.php -----
<?php
session_start();
require_once '../config/config.php';

// Ki·ªÉm tra ƒëƒÉng nh·∫≠p
if (!isset($_SESSION['user_id'])) {
    header('Content-Type: application/json');
    echo json_encode(['error' => 'Ch∆∞a ƒëƒÉng nh·∫≠p']);
    exit();
}

// Ki·ªÉm tra quy·ªÅn admin ch·ªâ cho t·∫°o/x√≥a
if (($_SERVER['REQUEST_METHOD'] === 'POST' || (isset($_GET['action']) && $_GET['action'] === 'delete')) && $_SESSION['role'] !== 'admin') {
    header('Content-Type: application/json');
    echo json_encode(['error' => 'Kh√¥ng c√≥ quy·ªÅn admin']);
    exit();
}

$testsDir = '../tests/';

function getTests($dir) {
    if (!is_dir($dir)) {
        return [];
    }
    return array_filter(glob($dir . '*'), 'is_dir');
}

// X·ª≠ l√Ω action=list ƒë·ªÉ tr·∫£ v·ªÅ danh s√°ch b√†i thi (cho c·∫£ user v√† admin)
if (isset($_GET['action']) && $_GET['action'] === 'list') {
    header('Content-Type: application/json');
    $tests = getTests($testsDir);
    $testNames = array_map('basename', $tests);
    echo json_encode($testNames);
    exit;
}

if ($_SERVER['REQUEST_METHOD'] === 'POST' && isset($_POST['create_test'])) {
    try {
        $testId = preg_match('/^test\d+$/', trim($_POST['test_id'])) ? trim($_POST['test_id']) : 'test' . trim($_POST['test_id']);
        $uploadDir = "{$testsDir}{$testId}/";
        if (file_exists($uploadDir)) throw new Exception("ID '{$testId}' ƒë√£ t·ªìn t·∫°i!");

        $dirs = [$uploadDir, "{$uploadDir}uploads/", "{$uploadDir}img/", "{$uploadDir}audio/"];
        foreach ($dirs as $dir) if (!mkdir($dir, 0777, true)) throw new Exception("Kh√¥ng th·ªÉ t·∫°o th∆∞ m·ª•c!");

        $csvPath = "{$uploadDir}uploads/questions.csv";
        if (!move_uploaded_file($_FILES['csv_file']['tmp_name'], $csvPath)) throw new Exception("L·ªói upload CSV!");

        foreach (['images' => 'img', 'audios' => 'audio'] as $type => $folder) {
            if (isset($_FILES[$type]) && !empty($_FILES[$type]['name'][0])) {
                foreach ($_FILES[$type]['tmp_name'] as $key => $tmpName) {
                    if ($_FILES[$type]['error'][$key] === UPLOAD_ERR_OK) {
                        move_uploaded_file($tmpName, "{$uploadDir}{$folder}/" . $_FILES[$type]['name'][$key]);
                    }
                }
            }
        }
        $success = "T·∫°o b√†i ki·ªÉm tra {$testId} th√†nh c√¥ng!";
    } catch (Exception $e) {
        $error = "L·ªói: " . $e->getMessage();
    }
}

if (isset($_GET['action']) && $_GET['action'] === 'delete' && isset($_GET['test'])) {
    $testDir = "{$testsDir}{$_GET['test']}";
    function deleteDir($dir) {
        if (!file_exists($dir)) return true;
        foreach (scandir($dir) as $item) {
            if ($item == '.' || $item == '..') continue;
            is_dir("$dir/$item") ? deleteDir("$dir/$item") : unlink("$dir/$item");
        }
        return rmdir($dir);
    }
    echo json_encode(deleteDir($testDir) ? ['status' => 'success'] : ['status' => 'error']);
    exit;
}

$tests = getTests($testsDir);
?>

<div class="test-admin">
    <h2>Qu·∫£n L√Ω B√†i Ki·ªÉm Tra</h2>
    <?php if (isset($success)): ?><p class="success"><?php echo $success; ?></p><?php endif; ?>
    <?php if (isset($error)): ?><p class="error"><?php echo $error; ?></p><?php endif; ?>
    <form method="POST" enctype="multipart/form-data" class="admin-form">
        <input type="text" name="test_id" placeholder="ID (VD: 2)" required>
        <input type="file" name="csv_file" accept=".csv" required>
        <input type="file" name="images[]" accept="image/*" multiple>
        <input type="file" name="audios[]" accept="audio/*" multiple>
        <button type="submit" name="create_test">T·∫°o</button>
    </form>
    <table>
        <tr><th>ID</th><th>H√†nh ƒë·ªông</th></tr>
        <?php foreach ($tests as $test): ?>
            <tr>
                <td><?php echo basename($test); ?></td>
                <td><button class="delete-btn" onclick="deleteTest('<?php echo basename($test); ?>')">X√≥a</button></td>
            </tr>
        <?php endforeach; ?>
    </table>
</div>

<script>
    function deleteTest(testId) {
        if (confirm(`X√≥a ${testId}?`)) {
            fetch(`admin.php?action=delete&test=${testId}`).then(res => res.json()).then(data => {
                if (data.status === 'success') location.reload();
            });
        }
    }
</script>
  ----- üîö H·∫øt file: test\admin.php -----

  - üìÑ get_questions.php

  ----- üìÑ N·ªôi dung file: test\get_questions.php -----
<?php
header('Content-Type: application/json');
require_once '../config/config.php';

$test = filter_var($_GET['test'] ?? 'test1', FILTER_SANITIZE_STRING);
$filePath = "../tests/{$test}/uploads/questions.csv";

try {
    if (!file_exists($filePath)) throw new Exception("File CSV kh√¥ng t·ªìn t·∫°i!");
    $file = fopen($filePath, 'r');
    $headers = fgetcsv($file);
    $data = [];
    while ($row = fgetcsv($file)) {
        if (count($row) === count($headers)) $data[] = array_combine($headers, array_map('trim', $row));
    }
    fclose($file);
    echo json_encode($data);
} catch (Exception $e) {
    echo json_encode(['error' => $e->getMessage()]);
}
exit;
  ----- üîö H·∫øt file: test\get_questions.php -----

  - üìÑ index.html

  ----- üìÑ N·ªôi dung file: test\index.html -----
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TOEIC Test</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #80deea);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex: 1;
        }
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .logo a {
            color: #fff;
            text-decoration: none;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #00bcd4;
        }
        header h1 {
            font-size: 24px;
            margin: 0;
        }
        .audio-player {
            margin: 0 20px;
        }
        .audio-player audio {
            border-radius: 5px;
        }
        #exitBtn {
            background: linear-gradient(90deg, #dc3545, #c82333);
            color: #fff;
            padding: 8px 16px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
        }
        #exitBtn:hover {
            background: linear-gradient(90deg, #c82333, #bd2130);
        }
        .container {
            padding: 20px;
            max-width: 1200px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            display: flex;
            gap: 20px;
        }
        .part-navigation {
            display: flex;
            flex-direction: column;
            gap: 8px;
            margin-bottom: 20px;
            width: 120px;
        }
        .part-btn {
            background: #e0f7fa;
            color: #006064;
            padding: 8px 16px;
            border: none;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 500;
            cursor: pointer;
            transition: background 0.3s, transform 0.3s;
        }
        .part-btn:hover {
            background: #b3e5fc;
            transform: translateY(-2px);
        }
        .part-btn.active {
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: #fff;
        }
        .question-section {
            flex: 1;
            background: #f9fbfd;
            padding: 20px;
            border-radius: 10px;
        }
        .sidebar {
            width: 300px;
            background: #f9fbfd;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        .timer {
            font-size: 18px;
            color: #006064;
            margin-bottom: 20px;
        }
        .question-list-title {
            font-size: 18px;
            font-weight: 600;
            color: #006064;
            margin-bottom: 10px;
        }
        .question-list {
            max-height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
        }
        #submitBtn {
            width: 100%;
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }
        #submitBtn:hover {
            background: linear-gradient(90deg, #27ae60, #219653);
        }
        #scoreDisplay {
            margin-top: 20px;
            font-size: 18px;
            color: #006064;
            text-align: center;
        }
        .scroll-top-btn {
            position: fixed;
            bottom: 20px;
            right: 20px;
            background: #0288d1;
            color: #fff;
            padding: 10px;
            border: none;
            border-radius: 50%;
            cursor: pointer;
            display: none;
        }
        footer {
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
        }
        footer a {
            color: #fff;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        footer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
                align-items: flex-start;
            }
            nav {
                margin-top: 10px;
            }
            nav a {
                margin: 5px;
            }
            header h1 {
                font-size: 20px;
            }
            .audio-player {
                margin: 10px 0;
            }
            .container {
                flex-direction: column;
                padding: 10px;
            }
            .part-navigation {
                width: 100%;
                align-items: center;
            }
            .part-btn {
                width: 100px;
            }
            .sidebar {
                width: 100%;
            }
            footer div {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo"><a href="../admin/dashboard.php">English Learning</a></div>
        <div style="display: flex; align-items: center; gap: 20px;">
            <h1>TOEIC Test <span id="testTitle"></span></h1>
            <div class="audio-player">
                <audio id="audioPlayer" controls><source id="audioSource" src="" type="audio/mpeg"></audio>
            </div>
            <button id="exitBtn">Tho√°t</button>
        </div>
        <nav>
            <a href="../admin/dashboard.php">Trang ch·ªß</a>
            <a href="../test/select_test.php">Thi th·ª≠</a>
            <a href="../profile.php">H·ªì s∆°</a>
            <a href="../contact.php">Li√™n h·ªá</a>
            <a href="../auth/logout.php" style="color: #ff5252;">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <main>
        <div class="container">
            <nav class="part-navigation">
                <button class="part-btn active" data-part="1">Part 1</button>
                <button class="part-btn" data-part="2">Part 2</button>
                <button class="part-btn" data-part="3">Part 3</button>
                <button class="part-btn" data-part="4">Part 4</button>
                <button class="part-btn" data-part="5">Part 5</button>
                <button class="part-btn" data-part="6">Part 6</button>
                <button class="part-btn" data-part="7">Part 7</button>
            </nav>
            <section id="questionSection" class="question-section"></section>
            <aside class="sidebar">
                <div class="timer">Th·ªùi gian: <span id="timeDisplay">120:00</span></div>
                <div class="question-list-title">C√¢u h·ªèi</div>
                <div class="question-list" id="questionList"></div>
                <button id="submitBtn">N·ªôp b√†i</button>
                <div id="scoreDisplay">ƒêi·ªÉm: 0/200</div>
            </aside>
        </div>
    </main>

    <footer>
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-bottom: 20px;">
                <div>
                    <h3>English Learning</h3>
                    <p>H·ªçc ti·∫øng Anh d·ªÖ d√†ng v√† hi·ªáu qu·∫£!</p>
                </div>
                <div>
                    <h3>Li√™n k·∫øt</h3>
                    <a href="../about.php">Gi·ªõi thi·ªáu</a>
                    <a href="../contact.php">Li√™n h·ªá</a>
                    <a href="../policy.php">Ch√≠nh s√°ch</a>
                </div>
                <div>
                    <h3>Li√™n h·ªá</h3>
                    <p>Email: support@englishlearning.com</p>
                    <p>Hotline: 0123 456 789</p>
                </div>
            </div>
            <p>¬© 2025 English Learning. All rights reserved.</p>
        </div>
    </footer>

    <button id="scrollTopBtn" class="scroll-top-btn">‚Üë</button>
    <script src="script.js"></script>
</body>
</html>
  ----- üîö H·∫øt file: test\index.html -----

  - üìÑ questions.csv
  - üìÑ script.js

  ----- üìÑ N·ªôi dung file: test\script.js -----
document.addEventListener('DOMContentLoaded', () => {
    const els = {
        questionSection: document.getElementById('questionSection'),
        questionList: document.getElementById('questionList'),
        timeDisplay: document.getElementById('timeDisplay'),
        submitBtn: document.getElementById('submitBtn'),
        exitBtn: document.getElementById('exitBtn'),
        scrollTopBtn: document.getElementById('scrollTopBtn'),
        partButtons: document.querySelectorAll('.part-btn'),
        scoreDisplay: document.getElementById('scoreDisplay'),
        audioPlayer: document.getElementById('audioPlayer'),
        audioSource: document.getElementById('audioSource'),
        testTitle: document.getElementById('testTitle')
    };

    let currentPart = 1, timeLeft = 120 * 60, timer, questions = {};
    const test = new URLSearchParams(window.location.search).get('test') || localStorage.getItem('currentTest') || 'test1';
    els.testTitle.textContent = test.replace('test', '');

    async function loadQuestions() {
        const data = await (await fetch(`get_questions.php?test=${test}`)).json();
        if (data.error) throw new Error(data.error);
        questions = data.reduce((acc, q) => {
            const part = parseInt(q.part);
            acc[part] = acc[part] || [];
            acc[part].push(q);
            return acc;
        }, {});
        displayQuestions(currentPart);
    }

    function startTimer() {
        timer = setInterval(() => {
            timeLeft--;
            els.timeDisplay.textContent = `${Math.floor(timeLeft / 60)}:${String(timeLeft % 60).padStart(2, '0')}`;
            if (timeLeft <= 0) { clearInterval(timer); alert('H·∫øt gi·ªù!'); submitTest(); }
        }, 1000);
    }

    function updateAudio(part) {
        const src = [2, 3, 4].includes(part) ? `../tests/${test}/audio/part${part}.mp3` : '';
        els.audioSource.src = src;
        if (src) els.audioPlayer.load();
    }

    function displayQuestions(part) {
        els.questionSection.innerHTML = '';
        const qs = questions[part] || [];
        if (!qs.length) return els.questionSection.innerHTML = '<p>Kh√¥ng c√≥ c√¢u h·ªèi.</p>';

        updateAudio(part);
        qs.forEach(q => {
            const div = document.createElement('div');
            div.classList.add('question');
            div.innerHTML = `<p>C√¢u ${q.id}: ${q.content || ''}</p>`;
            if (q.image) div.innerHTML += `<img src="../tests/${test}/img/${q.image}" alt="C√¢u ${q.id}">`;
            const opts = q.type === 'part2' ? ['A', 'B', 'C'] : ['A', 'B', 'C', 'D'];
            opts.forEach(o => {
                if (q[`option${o}`]) div.innerHTML += `
                    <div class="option">
                        <input type="radio" name="q${q.id}" value="${o}" id="q${q.id}-${o}">
                        <label for="q${q.id}-${o}">${o}</label>
                    </div>`;
            });
            els.questionSection.appendChild(div);
        });
        updateQuestionList(qs);
        loadAnswers();
    }

    function updateQuestionList(qs) {
        els.questionList.innerHTML = qs.map(q => `<button onclick="document.querySelector('input[name=q${q.id}]')?.scrollIntoView()">${q.id}</button>`).join('');
    }

    function saveAnswer(qId, val) {
        const answers = JSON.parse(localStorage.getItem(`toeic_${test}`)) || {};
        answers[qId] = val;
        localStorage.setItem(`toeic_${test}`, JSON.stringify(answers));
    }

    function loadAnswers() {
        const answers = JSON.parse(localStorage.getItem(`toeic_${test}`)) || {};
        document.querySelectorAll('input[type="radio"]').forEach(i => {
            if (answers[i.name.replace('q', '')] === i.value) i.checked = true;
            i.addEventListener('change', () => saveAnswer(i.name.replace('q', ''), i.value));
        });
    }

    function submitTest() {
        clearInterval(timer);
        const answers = JSON.parse(localStorage.getItem(`toeic_${test}`)) || {};
        let score = 0, total = 0;
        Object.values(questions).flat().forEach(q => {
            if (q.correct) { total++; if (answers[q.id] === q.correct) score++; }
        });
        els.scoreDisplay.textContent = `ƒêi·ªÉm: ${score}/${total}`;
        alert(`ƒêi·ªÉm: ${score}/${total}`);
        localStorage.removeItem(`toeic_${test}`);
        window.location.href = 'select_test.php';
    }

    els.partButtons.forEach(b => b.addEventListener('click', () => {
        els.partButtons.forEach(btn => btn.classList.remove('active'));
        b.classList.add('active');
        currentPart = parseInt(b.dataset.part);
        displayQuestions(currentPart);
    }));
    els.submitBtn.addEventListener('click', () => confirm('N·ªôp b√†i?') && submitTest());
    els.exitBtn.addEventListener('click', () => confirm('Tho√°t?') && (clearInterval(timer), localStorage.removeItem(`toeic_${test}`), window.location.href = 'select_test.php'));
    els.scrollTopBtn.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));
    window.addEventListener('scroll', () => els.scrollTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none');

    startTimer();
    loadQuestions();
});
  ----- üîö H·∫øt file: test\script.js -----

  - üìÑ select_test.php

  ----- üìÑ N·ªôi dung file: test\select_test.php -----
<?php
session_start();
require_once '../config/config.php';

if (!isset($_SESSION['user_id'])) {
    header("Location: ../auth/login.php");
    exit();
}
?>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ch·ªçn B√†i Thi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: linear-gradient(135deg, #e0f7fa, #80deea);
            margin: 0;
            padding: 0;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }
        main {
            flex: 1;
        }
        header {
            position: sticky;
            top: 0;
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 10px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
        }
        .logo {
            font-size: 24px;
            font-weight: bold;
        }
        .logo a {
            color: #fff;
            text-decoration: none;
        }
        nav a {
            color: #fff;
            text-decoration: none;
            margin: 0 15px;
            transition: color 0.3s;
        }
        nav a:hover {
            color: #00bcd4;
        }
        .select-test-container {
            padding: 20px;
            max-width: 1200px;
            margin: 20px auto;
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
        }
        h2 {
            text-align: center;
            font-size: 32px;
            margin-bottom: 30px;
            color: #006064;
        }
        .refresh-btn {
            display: block;
            margin: 0 auto 20px;
            padding: 10px 20px;
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: #fff;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }
        .refresh-btn:hover {
            background: linear-gradient(90deg, #2980b9, #2471a3);
            transform: translateY(-3px);
        }
        .test-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .test-card {
            background: #f9fbfd;
            border-radius: 10px;
            padding: 20px;
            text-align: center;
            box-shadow: 0 4px 10px rgba(0,0,0,0.1);
            transition: transform 0.3s;
        }
        .test-card:hover {
            transform: translateY(-5px);
        }
        .test-card h3 {
            font-size: 24px;
            color: #34495e;
            margin-bottom: 10px;
        }
        .test-info {
            margin-bottom: 15px;
            color: #666;
        }
        .test-info span {
            margin: 0 10px;
        }
        .action-btn {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 123, 255, 0.3);
        }
        .action-btn:hover {
            background: linear-gradient(90deg, #27ae60, #219653);
        }
        footer {
            background: linear-gradient(90deg, #006064, #00acc1);
            color: #fff;
            padding: 20px;
            text-align: center;
            width: 100%;
        }
        footer a {
            color: #fff;
            text-decoration: none;
            display: block;
            margin: 5px 0;
        }
        footer a:hover {
            text-decoration: underline;
        }
        @media (max-width: 768px) {
            header {
                flex-direction: column;
            }
            nav {
                margin-top: 10px;
            }
            nav a {
                margin: 5px;
            }
            .select-test-container {
                padding: 10px;
            }
            .test-grid {
                grid-template-columns: 1fr;
            }
            footer div {
                margin-bottom: 20px;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="logo"><a href="../admin/dashboard.php">English Learning</a></div>
        <nav>
            <a href="../admin/dashboard.php">Trang ch·ªß</a>
            <a href="select_test.php">Thi th·ª≠</a>
            <a href="../profile.php">H·ªì s∆°</a>
            <a href="../contact.php">Li√™n h·ªá</a>
            <a href="../auth/logout.php" style="color: #ff5252;">ƒêƒÉng xu·∫•t</a>
        </nav>
    </header>

    <main>
        <div class="select-test-container">
            <h2>Ch·ªçn B√†i Thi</h2>
            <button id="refreshBtn" class="refresh-btn">L√†m m·ªõi</button>
            <div id="testList" class="test-grid"></div>
        </div>
    </main>

    <footer>
        <div style="max-width: 1200px; margin: 0 auto;">
            <div style="display: flex; justify-content: space-between; flex-wrap: wrap; margin-bottom: 20px;">
                <div>
                    <h3>English Learning</h3>
                    <p>H·ªçc ti·∫øng Anh d·ªÖ d√†ng v√† hi·ªáu qu·∫£!</p>
                </div>
                <div>
                    <h3>Li√™n k·∫øt</h3>
                    <a href="../about.php">Gi·ªõi thi·ªáu</a>
                    <a href="../contact.php">Li√™n h·ªá</a>
                    <a href="../policy.php">Ch√≠nh s√°ch</a>
                </div>
                <div>
                    <h3>Li√™n h·ªá</h3>
                    <p>Email: support@englishlearning.com</p>
                    <p>Hotline: 0123 456 789</p>
                </div>
            </div>
            <p>¬© 2025 English Learning. All rights reserved.</p>
        </div>
    </footer>

    <script>
        async function loadTests() {
            try {
                const response = await fetch('../test/admin.php?action=list', { 
                    cache: 'no-store',
                    credentials: 'include'
                });
                if (!response.ok) {
                    const errorText = await response.text();
                    throw new Error(`L·ªói HTTP: ${response.status} - ${errorText}`);
                }
                const data = await response.json();
                if (data.error) {
                    document.getElementById('testList').innerHTML = `<p>${data.error}</p>`;
                    return;
                }
                document.getElementById('testList').innerHTML = data.length ? data.map(t => `
                    <div class="test-card">
                        <h3>${t.replace('test', 'Test ')}</h3>
                        <div class="test-info"><span>‚è∞ 120 ph√∫t</span><span>‚úèÔ∏è 200 c√¢u</span></div>
                        <button class="action-btn" onclick="startTest('${t}')">L√†m ngay</button>
                    </div>`).join('') : '<p>Ch∆∞a c√≥ b√†i thi.</p>';
            } catch (error) {
                console.error('L·ªói khi t·∫£i danh s√°ch b√†i thi:', error.message);
                document.getElementById('testList').innerHTML = '<p>L·ªói t·∫£i danh s√°ch b√†i thi: ' + error.message + '</p>';
            }
        }

        function startTest(testId) {
            localStorage.setItem('currentTest', testId);
            window.location.href = `index.html?test=${testId}`;
        }

        document.addEventListener('DOMContentLoaded', () => {
            loadTests();
            document.getElementById('refreshBtn').addEventListener('click', loadTests);
        });

        const scrollTopBtn = document.createElement('button');
        scrollTopBtn.textContent = '‚Üë';
        scrollTopBtn.style.position = 'fixed';
        scrollTopBtn.style.bottom = '20px';
        scrollTopBtn.style.right = '20px';
        scrollTopBtn.style.background = '#0288d1';
        scrollTopBtn.style.color = '#fff';
        scrollTopBtn.style.padding = '10px';
        scrollTopBtn.style.border = 'none';
        scrollTopBtn.style.borderRadius = '50%';
        scrollTopBtn.style.cursor = 'pointer';
        scrollTopBtn.style.display = 'none';
        document.body.appendChild(scrollTopBtn);

        window.addEventListener('scroll', () => {
            scrollTopBtn.style.display = window.scrollY > 200 ? 'block' : 'none';
        });

        scrollTopBtn.addEventListener('click', () => {
            window.scrollTo({ top: 0, behavior: 'smooth' });
        });
    </script>
</body>
</html>
  ----- üîö H·∫øt file: test\select_test.php -----

- üìÅ tests/
  - üìÅ testNew Economy TOEIC Test 1/
    - üìÅ audio/
    - üìÅ img/
      - üìÑ 1.png
      - üìÑ 2.png
      - üìÑ 3.png
      - üìÑ 4.png
      - üìÑ 5.png
      - üìÑ 6.png
    - üìÅ uploads/
      - üìÑ questions.csv
  - üìÅ testNew Economy TOEIC Test 2/
    - üìÅ audio/
    - üìÅ img/
      - üìÑ 1.png
      - üìÑ 2.png
      - üìÑ 3.png
      - üìÑ 4.png
      - üìÑ 5.png
      - üìÑ 6.png
    - üìÅ uploads/
      - üìÑ questions.csv
  - üìÅ testNew Economy TOEIC Test 3/
    - üìÅ audio/
    - üìÅ img/
      - üìÑ 1.png
      - üìÑ 2.png
      - üìÑ 3.png
      - üìÑ 4.png
      - üìÑ 5.png
      - üìÑ 6.png
    - üìÅ uploads/
      - üìÑ questions.csv
- üìÅ uploads/
